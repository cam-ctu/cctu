[{"path":"https://cam-ctu.github.io/cctu/articles/Vignette_Report_Quarto.html","id":null,"dir":"Articles","previous_headings":"","what":"Baseline","title":null,"text":"Note [Population-full] fictitious data Program: /home/rstudio/Documents/GitHub/cctu/vignettes/Progs/analysis.R Note [Population-safety] fictitious data Program: /home/rstudio/Documents/GitHub/cctu/vignettes/Progs/analysis.R Note [Population-safety] fictitious data Program: /home/rstudio/Documents/GitHub/cctu/vignettes/Progs/analysis.R Note [Population-safety]  fictitious data Program: /home/rstudio/Documents/GitHub/cctu/vignettes/Progs/analysis.R   Note B [Population-safety]  Program: /home/rstudio/Documents/GitHub/cctu/vignettes/Progs/analysis.R :::","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/Vignette_Report_Quarto.html","id":null,"dir":"Articles","previous_headings":"","what":"1.1.1 Summary Table","title":null,"text":"Note [Population-full] fictitious data Program: /home/rstudio/Documents/GitHub/cctu/vignettes/Progs/analysis.R","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/Vignette_Report_Quarto.html","id":null,"dir":"Articles","previous_headings":"","what":"1.1 Summary Table","title":null,"text":"Note [Population-safety] fictitious data Program: /home/rstudio/Documents/GitHub/cctu/vignettes/Progs/analysis.R","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/Vignette_Report_Quarto.html","id":null,"dir":"Articles","previous_headings":"","what":"1.2 Regression: Age predicted by Treatment","title":null,"text":"Note [Population-safety] fictitious data Program: /home/rstudio/Documents/GitHub/cctu/vignettes/Progs/analysis.R","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/Vignette_Report_Quarto.html","id":null,"dir":"Articles","previous_headings":"","what":"1.3 Kaplan-Meier Plot","title":null,"text":"Note [Population-safety]  fictitious data Program: /home/rstudio/Documents/GitHub/cctu/vignettes/Progs/analysis.R","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/Vignette_Report_Quarto.html","id":null,"dir":"Articles","previous_headings":"","what":"1.10 Summary Figure","title":null,"text":"Note B [Population-safety]  Program: /home/rstudio/Documents/GitHub/cctu/vignettes/Progs/analysis.R :::","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/Vignette_Report_Quarto.html","id":null,"dir":"Articles","previous_headings":"","what":"Safety","title":null,"text":"Program: /home/rstudio/Documents/GitHub/cctu/vignettes/Progs/analysis.R","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/Vignette_Report_Quarto.html","id":null,"dir":"Articles","previous_headings":"","what":"2 Deaths","title":null,"text":"Program: /home/rstudio/Documents/GitHub/cctu/vignettes/Progs/analysis.R","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/Vignette_Report_Quarto.html","id":null,"dir":"Articles","previous_headings":"","what":"Meta","title":null,"text":"NA [Population-NA] Program: /home/rstudio/Documents/GitHub/cctu/vignettes/Progs/data_import.R :::","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/Vignette_Report_Quarto.html","id":null,"dir":"Articles","previous_headings":"","what":"9 Imported Data","title":null,"text":"NA [Population-NA] Program: /home/rstudio/Documents/GitHub/cctu/vignettes/Progs/data_import.R :::","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/Vignette_Report_Quarto.html","id":null,"dir":"Articles","previous_headings":"","what":"Session information","title":null,"text":"","code":"R version 4.5.1 (2025-06-13) Platform: x86_64-pc-linux-gnu Running under: Ubuntu 24.04.3 LTS  Matrix products: default BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3  LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.26.so;  LAPACK version 3.12.0  locale:  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C                [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8      [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8     [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                   [9] LC_ADDRESS=C               LC_TELEPHONE=C             [11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C         time zone: Europe/London tzcode source: system (glibc)  attached base packages: [1] stats     graphics  grDevices utils     datasets  methods   base       other attached packages: [1] tinytable_0.15.0 xml2_1.4.1        loaded via a namespace (and not attached):  [1] digest_0.6.37     fastmap_1.2.0     xfun_0.53         knitr_1.50         [5] htmltools_0.5.8.1 png_0.1-8         rmarkdown_2.30    cli_3.6.5          [9] litedown_0.7      compiler_4.5.1    rstudioapi_0.17.1 tools_4.5.1       [13] evaluate_1.0.5    yaml_2.3.10       rlang_1.1.6       jsonlite_2.0.0    [17] htmlwidgets_1.6.4"},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"what-this-document-does","dir":"Articles","previous_headings":"","what":"What this Document Does","title":"Analysis Template","text":"package cctu designed help run analysis clinical trials typically produce output large word document one page per table figure following Statistical Analysis Plan, requires substantial audit trails. Automating trivialities getting tables word R, capturing meta data audit trials package achieves. document give overview tools provided package, explain thought behind , show use together. start explaining rationale, finish worked example. complimentary set R scripts outputs, aren’t easily directly captured within vignette also provided /doc directory. functions tools added, streamlined importing MACRO data, give improvements basic tables, automate reporting missing data. explained separate using-cttab vignette.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"meta-table","dir":"Articles","previous_headings":"Key Concepts","what":"Meta Table","title":"Analysis Template","text":"part writing Statistical Analysis Plan (SAP), structured meta-table one row per table figure needs produced. provides titles, subtitles, numbering, populations, etc. See help page meta_table details. package reliant provided user. Whilst producing tables/figures package : look population used table/figure explicitly filter data sets desired population whilst saving output use numbering determine file names xml graphics files write name code file produced output producing final output use meta-table index outputs, pull meta-data needed. Given interactions needed, somewhat contrary concept R functions just returning output rather modifying user environment, meta_table stored within environment private package. needs set using set_meta_table() get_meta_table() extract copy.","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"populations","dir":"Articles","previous_headings":"Key Concepts","what":"Populations","title":"Analysis Template","text":"assumed data.frame one row per subject, column population defined SAP logical indicating subject included population. definition populations, names, inclusion determined, important steps outside package! provide function create_popn_envir takes data.frame described , list data.frames. filters listed data.frame, looping populations, saves within set environments one per population. analysis code, function attach_pop() repeatedly called number table/figure. corresponding row meta-table used identify population associated table/figure, environment attached. list dataframes filtered create_popn_envir can now accessed, safe knowledge right population used.","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"code-architecture","dir":"Articles","previous_headings":"Key Concepts","what":"Code Architecture","title":"Analysis Template","text":"set default local files can set using cctu_initialise outputs stored using default arguments. code assumed modularised sequence code calls code using source. Copies scripts used vignette available within package folder /scripts. Main.R top minimal amount initialisation: working directory, PATHs, library(cctu), run_batch(), sequence source(), final calling create_word_xml() maybe calls render outputs. configuration file, loading packages, setting graphical defaults, loading bespoke functions, Data import manipulation: cleaning, merging, creating derived variables maybe, finally using create_popn_envir happens. Analysis: actual statistical work happens. May well modularised individual scripts section study, ordered Form chronological ordering study. important call library(cctu) first use source. package modifies base function base::source, record name file called source name file sourced. provide audit trail allowing sequence code used create table/figure easily found. Like meta_table audit trail lives private environment easily directly accessible.","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"xml","dir":"Articles","previous_headings":"Key Concepts","what":"XML","title":"Analysis Template","text":"step transferring table figures word facilitated xml. tables stored copy local drive (/Output/Core default) semi-readable format tags similar html tables. analysis, block code produce table figure put attach_pop() write_table() write_gglot(). argument write_table data frame; write_ggplot defaults using last plot object, can take ggplot object argument. recent addition write_plot can handle ggplot object graphical outputs e.g. dot_plot eudract package. write_* functions look number table called attach_pop (temporarily stored private environment); output stored local drive either XML file, graphics file named suffix “_X.Y.Z” identify output; name code file created output written meta-table; default final call clean_up removes objects global environment (apart named vector .reserved) detach population environment. analysis, function write_docx glues files together along meta data large xml file. tables directly copied, figures links file paths. xslt technology used convert document schema used MS Word, can opened directly. Previously command create_word_xml used, needed subsequent steps convert fully compliant docx figures. Included back compatibility now. want tweak style word document edit xslt file totally risk! case write_docx anymore. allowed edit file Docx file complicated.","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"pointers","dir":"Articles","previous_headings":"Key Concepts","what":"Pointers","title":"Analysis Template","text":"function may worth looking help files, hopefully names give hint!","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"data-import-manipulation","dir":"Articles","previous_headings":"Key Concepts > Pointers","what":"Data import & Manipulation","title":"Analysis Template","text":"read_data data_table_summary clean_names remove_blank_rows_cols var_lab apply_macro_dict extract_form set external data files read , along names corresponding data.frames created recorded one initial data.frame. can summarised table report using data_table_summary also used succinctly read data files read_data.","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"analysis","dir":"Articles","previous_headings":"Key Concepts > Pointers","what":"Analysis","title":"Analysis Template","text":"sumby() work-horse produce standard summary tables, additional figures produced side-effects cttab recent addition greatly expands flexibility scope sumby regression_table function takes regression object (lm, glm, lme, gee, coxph, gls) produces summary table suitable report, allowing provide character vector label parameters meaningfully. km_ggplot function takes survfit object produces publication-quality fig Kaplan-Meier plot error-bands plus table counting numbers risk events. propercase rbind_space : glue together repeated outputs sumby clean_up called default within call write_*. arguments call clean_up code need re-use R objects multiple outputs. .reserved hidden variable global environment. clean_up ignores objects named .reserved. can edit alternative using arguments within write_*, ideally defined end data manipulation. rm_envir maybe helpful code development interactive use attach_pop.","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"missing-data","dir":"Articles","previous_headings":"Key Concepts","what":"Missing Data","title":"Analysis Template","text":"use cttab created side-effect summaries missing data. See functions dump_missing_report get_missing_report reset_missing_report","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"audit-trails","dir":"Articles","previous_headings":"Key Concepts","what":"Audit trails","title":"Analysis Template","text":"described already source() captures trail code sources code. demonstration convert graphical tree representation using combination Rmarkdown latex. can just get copy cctu:::cctu_env$code_tree write local copy csv file say. similar fashion examples Rmarkdown can use read outputs write_* produce Html pdf, … version main report, depending readers report prefer format. end code good practice run Sys.info(), date(), sessionInfo() document fine details session, package versions, etc. Also may want run final definitive version report different server validated instance R, using R CMD Batch nice side-effect creating .Rout file complete log code outputs. wrapper function avoid open command line window operating system run_batch() .","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"worked-example","dir":"Articles","previous_headings":"","what":"Worked Example","title":"Analysis Template","text":"document used illustrate set standard set analysis using library cctu. assumes copied across template blank folder structure (cctu_initialise), created library within main folder extra packages may need, set git versioning instance rstudio project. future project document step. top level file called “main.R”","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"initial-lines","dir":"Articles","previous_headings":"Worked Example","what":"Initial lines","title":"Analysis Template","text":"run just initial lines, last command evoke R CMD BATCH run entire set code produce log file “main.Rout”, final step, using validated server. run_batch line commented vignette work though.. vignette now differs standard use, Main.R file now sequence source() calls. run source files, quote R code contain. copy files outputs standard use starting Main.R","code":"rm(list = ls()) # if using renv for extra packages need this line for R CMD BATCH # renv::load() library(cctu) #>  #> Attaching package: 'cctu' #> The following object is masked from 'package:base': #>  #>     source options(verbose = TRUE) # run_batch(\"main.R\") DATA <- \"PATH_TO_DATA\" cctu_initialise() rm_output()"},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"configuration","dir":"Articles","previous_headings":"Worked Example","what":"Configuration","title":"Analysis Template","text":"recommended set config.R file reads libraries sets graphical settings maybe reads bespoke functions want define","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"library-management","dir":"Articles","previous_headings":"Worked Example > Configuration","what":"Library management","title":"Analysis Template","text":"use Docker image shug0131/cctu rare event need install extra packages. preferable manage using renv package. Best practice write list packages needed, including extra ones, DESCRIPTION file top level, listing Imports: heading. Running cctu::initialise() default create DESCRITPTION file remind edit . modify script config.R read file workout packages load. function library_description() step . need use renv installing extra packages, adding DESCRIPTION make explicit, help create renv.lock file correctly get package versions everything need.","code":"source(\"Progs/config.R\") options(verbose = TRUE)  library_description()  # mylibs <- c(\"readxl\", \"dplyr\", \"ggplot2\", \"magrittr\",\"tidyr\",\"rmarkdown\",\"knitr\",\"xml2\",\"rvest\") # # for(package in mylibs){ #   library(package, character.only = TRUE) # }   # read in all function files my_functions <- list.files(\"Progs\\\\functions\") for(file in my_functions){   if( file != \"archive\"){   source(paste0(\"Progs\\\\functions\\\\\", file))   } }  # define theme for figures default_theme <- theme_get()  graphical_theme <- theme_bw() + theme(   axis.line.x      = element_line(color = \"black\"),   axis.line.y      = element_line(color = \"black\"),   panel.grid.major = element_blank() ,   panel.grid.minor = element_blank(),   panel.background = element_blank(),   # panel.border = element_blank(),   # axis.text = element_text(size = rel(1), angle = 45)   axis.title.x     = element_text(margin = margin(t = 10)),   legend.key       = element_rect(colour = \"white\", fill = NA),   strip.background = element_rect(colour = \"black\") )  # remove anything no longer required rm(mylibs, package, my_functions, file)"},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"data-import","dir":"Articles","previous_headings":"Worked Example","what":"Data Import","title":"Analysis Template","text":"Next step import meta-table, study data apply manipulations, finally create population environments. Grab data “DATA” folder. Always use relative paths, build absolute paths MACRO variables defined near start ‘paste0(DATA, “/myfile.csv”)’ convert variable names standard ‘lower_case’ remember less remove blank rows columns give factor variables levels make dates dates needed, whilst careful partial dates… grab ready prepared ‘dirty’ raw data typical MACRO DB apply concepts. one refer vignette using-cttab, apply functions: apply_macro_dict, /var_lab","code":"source(\"Progs/data_import.R\") options(stringsAsFactors = FALSE)  data_table <- data.frame(   name=c(\"data\",\"codes\"),   file=c(\"dirtydata.csv\",          \"codes.csv\"),   folder=system.file(\"extdata\", package=\"cctu\"),   stringsAsFactors = FALSE )   read_data(data_table) read_data( data_table[2,])  # take an template meta table and add a new row with edited values. meta <- cctu::meta_table_example regress <- meta[1,] regress$title <- \"Regression: Age predicted by Treatment\" regress$number <- \"1.2\" meta <- rbind(meta, regress)  km <- meta[1,] km$title <- \"Kaplan-Meier Plot\" km$number <- \"1.3\" km$item <- \"figure\" meta <- rbind(meta, km) set_meta_table( meta)   write_table(data_table_summary(data_table),number = \"9\", clean_up = FALSE)   # Not strictly needed as the default is to apply these two functions inside of read_data(), but this # can be turned off with clean_names_option = FALSE , or remove_blank_rows_cols_option=FALSE data %<>% clean_names() %>% remove_blank_rows_cols() codes %<>% clean_names   for( x in unique(codes$var)){   code_df <-  subset(codes, var==x)   print(code_df)   data[,x] <- factor( data[,x], levels=code_df$code, labels=code_df$label) }  data$start_date <- as.POSIXct( data$start_date , format=\"%d/%m/%Y\") data_name <- names(data) names(data)[match(\"subject_id\", data_name)] <- \"subjid\"    #Create the population table  popn <- data[,\"subjid\", drop=FALSE] popn$safety <- TRUE popn$full <- popn$subjid<5  create_popn_envir(\"data\",popn)  #tidy up rm(code_df, codes, data_name, x) .reserved <- ls()"},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"analysis-1","dir":"Articles","previous_headings":"Worked Example","what":"Analysis","title":"Analysis Template","text":"","code":"source(\"Progs/analysis.R\") attach_pop(\"1.1\") X <- rbind_space(   sumby(age, treatment , data=data),   sumby(gender, treatment, data=data) ) write_table(X)  attach_pop(\"1.1.1\") X <- rbind_space(   sumby(age, treatment, data=data, label=\"aGe (yAars)\", text_clean = NULL),   sumby(gender, treatment, data=data, text_clean = NULL) ) write_table(X)   attach_pop(\"1.10\") X <- sumby(age, treatment, data=data) write_ggplot(attr(X,\"fig\"))  attach_pop(\"1.2\") fit <- lm(age~treatment, data=data, na.action = na.omit) X <- regression_table(fit, labels = c(\"Mean age reference arm\",\"Treament Effect\")) #X <- sumby(age, treatment, data=data, label=\"aGe (yAars)\", text_clean = NULL) write_table(X)  attach_pop(\"1.3\") library(survival) fit <- survfit(Surv(time,status)~rx, data=colon) fig <- km_ggplot(fit) write_plot(fig)  attach_pop(\"2\") write_text(\"There were no deaths\")"},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"creating-the-report","dir":"Articles","previous_headings":"Worked Example","what":"Creating the Report","title":"Analysis Template","text":"Need create names population labels, including number subjects. Good name report ending suffix “.docx”. output Vignette_Report_bak.docx. older function create_word_xml() output neccesary carry post-processing word. permanently save, first go file > Edit Links Files; highlight figures (shift + scroll), click “break link”. File> save , ensure Saved Type “Word Document (*.docx)“. needed write_docx output.","code":"pop_size <- sapply(popn[, names(popn) != \"subjid\"], sum) pop_name <- unique(get_meta_table()$population) index <- match(pop_name, names(pop_size)) popn_labels <- paste0(propercase(pop_name), \" (n = \", pop_size[index], \")\")  write.csv(get_meta_table(), file = file.path(\"Output\", \"meta_table.csv\"), row.names = FALSE) write.csv(get_code_tree(), file = file.path(\"Output\", \"codetree.csv\"), row.names = FALSE) write_docx(   report_title = \"Vignette Report\",   author = \"Simon Bond\",   filename = \"Vignette_Report.docx\",#file.path(\"Output\", \"Reports\", \"Vignette_Report.docx\"),   popn_labels = popn_labels ) #> now dyn.load(\"/home/runner/work/_temp/Library/png/libs/png.so\") ... #> Vignette_Report.docx created. Sys.info() #>                                               sysname  #>                                               \"Linux\"  #>                                               release  #>                                   \"6.11.0-1018-azure\"  #>                                               version  #> \"#18~24.04.1-Ubuntu SMP Sat Jun 28 04:46:03 UTC 2025\"  #>                                              nodename  #>                                       \"runnervmi13qx\"  #>                                               machine  #>                                              \"x86_64\"  #>                                                 login  #>                                             \"unknown\"  #>                                                  user  #>                                              \"runner\"  #>                                        effective_user  #>                                              \"runner\" sessionInfo() #> R version 4.5.2 (2025-10-31) #> Platform: x86_64-pc-linux-gnu #> Running under: Ubuntu 24.04.3 LTS #>  #> Matrix products: default #> BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3  #> LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.26.so;  LAPACK version 3.12.0 #>  #> locale: #>  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8        #>  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8    #>  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C           #> [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C    #>  #> time zone: UTC #> tzcode source: system (glibc) #>  #> attached base packages: #> [1] stats     graphics  grDevices utils     datasets  methods   base      #>  #> other attached packages: #>  [1] survival_3.8-3 xml2_1.5.1     rvest_1.0.5    tidyr_1.3.2    rmarkdown_2.30 #>  [6] readxl_1.4.5   magrittr_2.0.4 knitr_1.51     ggplot2_4.0.1  dplyr_1.1.4    #> [11] cctu_0.8.11    #>  #> loaded via a namespace (and not attached): #>  [1] sass_0.4.10        generics_0.1.4     lattice_0.22-7     digest_0.6.39      #>  [5] evaluate_1.0.5     grid_4.5.2         RColorBrewer_1.1-3 fastmap_1.2.0      #>  [9] cellranger_1.1.0   jsonlite_2.0.0     Matrix_1.7-4       gridExtra_2.3      #> [13] httr_1.4.7         purrr_1.2.1        scales_1.4.0       textshaping_1.0.4  #> [17] jquerylib_0.1.4    cli_3.6.5          rlang_1.1.7        splines_4.5.2      #> [21] xslt_1.5.1         withr_3.0.2        cachem_1.1.0       yaml_2.3.12        #> [25] tools_4.5.2        png_0.1-8          vctrs_0.6.5        R6_2.6.1           #> [29] lifecycle_1.0.5    htmlwidgets_1.6.4  ragg_1.5.0         pkgconfig_2.0.3    #> [33] pillar_1.11.1      bslib_0.9.0        gtable_0.3.6       data.table_1.18.0  #> [37] glue_1.8.0         Rcpp_1.1.1         systemfonts_1.3.1  xfun_0.55          #> [41] tibble_3.3.1       tidyselect_1.2.1   farver_2.1.2       htmltools_0.5.9    #> [45] patchwork_1.3.2    labeling_0.4.3     compiler_4.5.2     S7_0.2.1 date() #> [1] \"Mon Jan 12 15:14:36 2026\""},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"multiple-versions-of-reports","dir":"Articles","previous_headings":"Worked Example","what":"Multiple Versions of Reports","title":"Analysis Template","text":"Often may need produce slight variations report, closed open versions. provide various options() overwrite default arguments write_**() options(cctu_output=\"Other_Output_Folder\"), although still need create directory required sub directories first. Also can provide source(file, local=TRUE) allow scripts run inside function, rather global environment; options(cctu_source_local=TRUE) overrides default. code need branch produce different outputs (e.g. pooling arms ), depending version. can select subsets meta table remove/include tables figures similar branching logic. idea able set differing options /R objects single script produces versions report repeated source(\"main.R\"). Alternative approaches found, code--write-code, using knitr::knit_expand. Creating functions modifying meta-table automatically. without complexity! still need produce log commands run_batch() just system(\"R CMD BATCH main.R\") (N.B extra packages managed renv() need add line renv::load() start top-level script; don’t use --vanilla stops renv setup working ). still need produce output cctu_env$code_tree versions reports. ’d recommend using master script approach simplicity readability, unless good reason .","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"other-outputs","dir":"Articles","previous_headings":"Worked Example","what":"Other Outputs","title":"Analysis Template","text":"can use rmarkdown create versions main report graphical representation code architecture. may need use Sys.setenv(RSTUDIO_PANDOC=\"C:/Program Files/RStudio/bin/pandoc\") calling render, understood author present . Numerous outputs can obtained rmarkdown: slide show figures, reformatting output desired…","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"code-tree","dir":"Articles","previous_headings":"Worked Example > Other Outputs","what":"Code Tree","title":"Analysis Template","text":"can use following example produces code tree pdf. can also use write_plot function include code tree plot report.","code":"ctfile <- get_code_tree() pdf(\"codetree.pdf\", width=13, height=7) plot(ctfile) dev.off()"},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"cross-reference-with-docx","dir":"Articles","previous_headings":"Worked Example > Other Outputs","what":"Cross reference with Docx","title":"Analysis Template","text":"Tables can cross-referenced word. convenient writing narratives want reference tables figures. can find cross reference tables figures . can changed order tables cut paste dragging headings navigation pane word reference still . can press Ctrl+select , press F9. change numbering table figure, change also applied references made narratives.","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/analysis-template.html","id":"html-version-of-the-report","dir":"Articles","previous_headings":"Worked Example > Other Outputs","what":"HTML version of the report","title":"Analysis Template","text":"readers may prefer get report HTML document view -screen. provides easier navigation floating toolbar. See vignette Vignette Report HTML","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/rmarkdown_report.html","id":"motivation","dir":"Articles","previous_headings":"","what":"Motivation","title":"Generate HTML Report","text":"Sometimes may want prodice report HTML format insead Word. can rewirte analysis RMarkdown use knitr package generate report. can use outputs cctu package generate HTML report instead converting Word HTML. HTML report nice layout easy read. can resize table fit screen size interact table figures. give CI flexibility look report detail. nice R workflow tutorial Frank E Harrell Jr reporting. focusing converting cctu package output HTML. report generated XML files Output/ directory. folder, Core/ Figures/ folders. Core/ folder contains XML files tables text. Figures/ folder contains figures. report generated files. also relies meta_table.csv file Output/ folder. file contains information tables, text R script generated corresponding tables/figures. templates can use generate report. RMarkdown Quarto start, make sure following main.R file. make sure meta data saved meta_table.csv file. file used input report. file includes information item type (tables, text figure), item number R scripts used generate item. important make sure file date.","code":"write.csv(   get_meta_table(),    file=file.path(\"Output\",\"meta_table.csv\"), row.names = FALSE )"},{"path":"https://cam-ctu.github.io/cctu/articles/rmarkdown_report.html","id":"rmarkdown-report","dir":"Articles","previous_headings":"","what":"RMarkdown report","title":"Generate HTML Report","text":"rmarkdown_report.Rmd file main file used generate report. table.Rmd text.Rmd files templates tables text respectively. rmarkdown_report.Rmd file call templates generate report. can use following code copy templates current working directory. copying files, can modify template wish. use following code generate report. Click see example output report generated rmarkdown_report.Rmd file.","code":"# Copy the templates to the Progs folder under current working directory rmd_files <- list.files(system.file(\"assets/rmd\", package = \"cctu\"),                         pattern = \"*.Rmd\",                         full.names = TRUE) file.copy(from = rmd_files,            to = \"Progs\",            overwrite = TRUE,            recursive = FALSE,            copy.mode = TRUE) rmarkdown::render(   # Path to the RMD template file   file.path(\"Progs\", \"_rmarkdown_report.Rmd\"),    # Name of the output file   output_file = \"Vignette_Report.html\",     # Set the output directory to the Output/Reports folder   output_dir = \".\",#file.path(\"Output\", \"Reports\"),   # Set the working directory to the current working directory instead of the RMD file   knit_root_dir = getwd(),    params = list(     my_author = \"Simon Bond\",  # Name of the author     my_title = \"Vignette_Report\" # Title of the report   ) )"},{"path":"https://cam-ctu.github.io/cctu/articles/rmarkdown_report.html","id":"quarto-report","dir":"Articles","previous_headings":"","what":"Quarto report","title":"Generate HTML Report","text":"Quarto new open-source scientific technical publishing system built Pandoc (used previous method). great tool creating reports, presentations, websites. similar RMarkdown features flexible. can use Quarto create report HTML format. First, need copy yhe templates current working directory. copying files, can modify template wish. use following code generate report. Click see example output report generated quarto-report.qmd file. can set directory output file quarto::quarto_render(). can also able redirect output different directory. example, output_file = \"Vignette Report.html\" work. quarto::quarto_render() always generate output file current working directory. can use file.copy() function manully move file desired directory. can set tinny_table=FALSE want use flextable package generate tables. Rmd uses kableExtra package generate tables. QMD uses flextable tinnytable package generate tables. flextable good Word HTML output good PDF anyother formats. kableExtra built top kabel knitr complex coding. kableExtra flextable flexible tinnytable package also complex. tinnytable package lightweight package easy use simple syntax dependencies. Please makesure install relevant packages run code.","code":"file.copy(from = system.file(\"assets/qmd/_quarto-report.qmd\", package = \"cctu\"),            to = getwd(),            overwrite = TRUE,            recursive = FALSE,            copy.mode = TRUE) quarto::quarto_render(   input = \"_quarto-report.qmd\", # Path to the QMD template file   # Name of the output file   output_file = \"Vignette_Report_Quarto.html\",    # Set the output format to HTML   output_format = \"html\",   # Params to be passed to the QMD file   execute_params = list(     my_author = \"Simon Bond\",     my_title = \"Vignette Report\",     tinny_table = TRUE # Use the tinny table format for the tables   ) )"},{"path":"https://cam-ctu.github.io/cctu/articles/rmarkdown_report.html","id":"remark","dir":"Articles","previous_headings":"","what":"Remark","title":"Generate HTML Report","text":"can change produce multiple types reports using template. Including HTML, Word PDF. use write_docx word PDF gives better looking output. can save word file PDF file.","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"what-this-document-does","dir":"Articles","previous_headings":"","what":"What this Document Does","title":"Use cttab in the Analysis","text":"package cctu updated utilize DLU file CLU file facilitate analyzing process. newly added functions affect previous process. , document going learn new functions provided package facilitate analysis. start, get familiarized cctu package looking Analysis Template vignette. Remember, sumby function benefit data attribute related new functions mentioned document. Namely, variable label value labels effect output. don’t need go everything document going stick sumby function.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"variable-and-value-label","dir":"Articles","previous_headings":"What’s new","what":"Variable and value label","title":"Use cttab in the Analysis","text":"familiar SAS, Stata SPSS, already know ’s variable label value label (variable format ). variable label gives description variable, value label explain values stand . variable stay numeric categories attached . means, can subset manipulate like numerical variable report data categorical one. important understand , let’s use mtcars dataset demonstrate works. can , label labels attributes added. variable numeric. can still summarize numeric variable : can convert value label factor just final analysis. to_factor function replace value labels convert variable factor. cautious, R process might drop variable value label attributes. Normally won’t, check report sure. example, .numeric, .character .logiac drop variable value label. to_numeric, to_character to_logical can used convert data type. can also use copy_lab function copy variable value labels variable. can use var_lab extract variable label assign one. use has_label check variable variable label . may also want use drop_lab drop variable label. value label, can use val_lab extract assign value label. use has_labels check variable value label. also unval function drop value label lab2val replace data.frame value corresponding value labels.","code":"data(mtcars) # Assign variable label var_lab(mtcars$am) <- \"Transmission\"  # Assign value label with named vector val_lab(mtcars$am) <- c(\"Automatic\" = 0, \"Manual\" = 1) str(mtcars$am) #>  num [1:32] 1 1 1 0 0 0 0 0 0 0 ... #>  - attr(*, \"label\")= chr \"Transmission\" #>  - attr(*, \"labels\")= Named num [1:2] 0 1 #>   ..- attr(*, \"names\")= chr [1:2] \"Automatic\" \"Manual\" summary(mtcars$am) #>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.  #>  0.0000  0.0000  0.0000  0.4062  1.0000  1.0000 # Extract variable label var_lab(mtcars$am) #> [1] \"Transmission\"  # Convert variable to factor with labels attached to it table(to_factor(mtcars$am)) #>  #> Automatic    Manual  #>        19        13"},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"macro-dataset-utility-functions","dir":"Articles","previous_headings":"What’s new","what":"MACRO dataset utility functions","title":"Use cttab in the Analysis","text":"new functions added utilize DLU CLU files data analysis. apply_macro_dict function uses DLU CLU file assign variable value labels dataset. function convert variable name data DLU lower case default. also convert dataset based variable type DLU file. don’t want convert variable name lower cases, set clean_names = FALSE. extract_form can extract MACRO data form visits. data converted data.table class, extension data.frame works exactly . great package lots data manipulation capability, seek website details. one thing remember names variable selection considered variable data.","code":"vars <- c(\"mpg\", \"am\") # You can do this in the normal data.frame mtcars[, vars]  # But you can't do this for the data.table dat <- data.table::data.table(mtcars) mtcars[, vars]  # You need to add with=FALSE to do that mtcars[, vars, with = FALSE]"},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"table-function","dir":"Articles","previous_headings":"What’s new","what":"Table function","title":"Use cttab in the Analysis","text":"might already knew use sumby function, now new function called cttab added. difference two functions latter can handle variable label value labels. can feed labelled data function populate summary table. Report data treatment group, stratify tables visit. Also, can report variable based conditions group variable report. generates missing report internally can dump missing report end. extra step needed. also produce summary plots variables. produced plots arrange 3 3 new plot producd variables exceeds 9. remaining document show working case.","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"setting-options","dir":"Articles","previous_headings":"What’s new","what":"Setting options","title":"Use cttab in the Analysis","text":"cctab function good flexibility, means lots parameters can use. check manual cctab function. , can use options set default value parameters used cctab. setting options, details please check cctab function manuals.","code":"options(cctu_digits = 3) # keep 3 digits for numerical value options(cctu_digits_pct = 0) # keep 0 digits for percentage options(cctu_subjid_string = \"subjid\") # Set subject ID string options(cctu_print_plot = FALSE) # Don't produce plots"},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"working-example","dir":"Articles","previous_headings":"","what":"Working example","title":"Use cttab in the Analysis","text":"section, show populate tables.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"usual-case","dir":"Articles","previous_headings":"Working example > Data reading","what":"Usual case","title":"Use cttab in the Analysis","text":"read data , can read data setting columns character. handled later. process can found Analysis Template vignette.","code":"# Read example data dt <- read.csv(system.file(\"extdata\", \"pilotdata.csv\", package = \"cctu\"), colClasses = \"character\")  # Read DLU and CLU dlu <- read.csv(system.file(\"extdata\", \"pilotdata_dlu.csv\", package = \"cctu\")) clu <- read.csv(system.file(\"extdata\", \"pilotdata_clu.csv\", package = \"cctu\"))"},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"vertically-splited-multiple-data","dir":"Articles","previous_headings":"Working example > Data reading","what":"Vertically splited multiple data","title":"Use cttab in the Analysis","text":"multiple datasets, combine stage. multiple datasets given variable name, can use rbind function combine data together. different datasets different variable names except key variables, can use merge_data function combine together.","code":"# Read example data dt_a <- read.csv(system.file(\"extdata\", \"test_A.csv\", package = \"cctu\"),   colClasses = \"character\" ) dt_b <- read.csv(system.file(\"extdata\", \"test_B.csv\", package = \"cctu\"),   colClasses = \"character\" )  # Read DLU and CLU dlu_a <- read.csv(system.file(\"extdata\", \"test_A_DLU.csv\", package = \"cctu\")) dlu_b <- read.csv(system.file(\"extdata\", \"test_B_DLU.csv\", package = \"cctu\")) clu_a <- read.csv(system.file(\"extdata\", \"test_A_CLU.csv\", package = \"cctu\")) clu_b <- read.csv(system.file(\"extdata\", \"test_B_CLU.csv\", package = \"cctu\"))  # Merge dataset with merge_data function res <- merge_data(   datalist = list(dt_a, dt_b), dlulist = list(dlu_a, dlu_b),   clulist = list(clu_a, clu_b) ) dt <- res$data # Extract combined data dlu <- res$dlu # Extract combined DLU data clu <- res$clu # Extract combined CLU data"},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"apply-macro-dictionary","dir":"Articles","previous_headings":"Working example","what":"Apply macro dictionary","title":"Use cttab in the Analysis","text":"Next, apply DLU CLU files dataset. clean variable name dataset DLU/CLU files applying apply_macro_dict. function can handle variable name cleaning setting clean_names = TRUE, default behaviour. apply_macro_dict function clean variable name DLU CLU, apply macro meta data target dataset. cleaned DLU data sotred internally used cttab report missingness. can use get_dlu extract internal DLU data applying apply_macro_dict dataset useage reference. Although can use set_dlu change internal DLU data stored apply_macro_dict, recommended unless know . impact missing report. , follow Analysis Template vignette setup population etc. Next data analysis.","code":"# Create subjid dt$subjid <- substr(dt$USUBJID, 8, 11)  # Apply CLU and DLU files dt <- apply_macro_dict(dt, dlu = dlu, clu = clu, clean_names = FALSE)  # Give new variable a label var_lab(dt$subjid) <- \"Subject ID\""},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"data-analysis","dir":"Articles","previous_headings":"Working example","what":"Data analysis","title":"Use cttab in the Analysis","text":"attached population, next thing may want extract particular form data. table, assume reporting age, sex BMI patient registration form treatment arm. demonstrating filtering, report non-white patients’ BMI.","code":"# Attach population attach_pop(\"1.1\")  # Extract patient patient registration form and keep subjid variable df <- extract_form(dt, \"PatientReg\", vars_keep = c(\"subjid\"))  # Now report Age, Sex and BMI. For BMI, report not white only X <- cttab(   x = c(\"AGE\", \"SEX\", \"BMIBL\"), # Variable to report   group = \"ARM\", # Group variable   data = df, # Data   select = c(\"BMIBL\" = \"RACEN != 1\") ) # Filter for variable BMI # Write table X #> ┌───────────────────┬─────────────────┬─────────────────┬─────────────────┐ #> |                   │     Placebo     │    Research     │      Total      | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Observation        │       48        │       52        │       100       | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Age                                                                      | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Valid Obs.       │       48        │       52        │       100       | #> |  Mean (SD)        │   75.5 (7.86)   │   74.8 (8.04)   │   75.1 (7.93)   | #> |  Median [Min, Max]│78.0 [57.0, 88.0]│77.0 [56.0, 88.0]│77.0 [56.0, 88.0]| #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Sex                                                                      | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Female           │   26/48 (54%)   │   25/52 (48%)   │  51/100 (51%)   | #> |  Male             │   22/48 (46%)   │   27/52 (52%)   │  49/100 (49%)   | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Baseline BMI (kg/m^2)                                                    | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Valid Obs.       │        5        │        6        │       11        | #> |  Mean (SD)        │   27.8 (3.98)   │   24.6 (3.54)   │   26.0 (3.93)   | #> |  Median [Min, Max]│27.9 [23.4, 32.8]│23.5 [21.3, 31.4]│24.3 [21.3, 32.8]| #> └───────────────────┴─────────────────┴─────────────────┴─────────────────┘"},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"formula-interface","dir":"Articles","previous_headings":"Working example","what":"Formula interface","title":"Use cttab in the Analysis","text":"One can use formula cctab just like lm, able group variables (described later section). left hand side formula variables summarised. Right hand side formula grouping /row splitting variables. visit variable separated | grouping variable, use 1 grouping variables. group row_split parameters used formula interface. parameters .","code":"# No grouping X <- cttab(AGE + SEX + BMIBL ~ 1, data = df) # Group summarise by ARM X <- cttab(AGE + SEX + BMIBL ~ ARM, data = df) # Group summarise by ARM and split by visit cycle X <- cttab(AST + BILI ~ ARM | AVISIT, data = df) # Split by visit cycle X <- cttab(AST + BILI ~ 1 | AVISIT, data = df)"},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"missing-data-report","dir":"Articles","previous_headings":"Working example","what":"Missing data report","title":"Use cttab in the Analysis","text":"cttab function report missing internally. can use following get missing report. , can finish remaining Analysis Template vignette.","code":"# This will save the missing report under Output folder # Or you can set the output folder and name dump_missing_report()  # Pull out the missing report if you want miss_rep <- get_missing_report()  # Reset missing report reset_missing_report()"},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"more-to-cttab","dir":"Articles","previous_headings":"","what":"More to cttab","title":"Use cttab in the Analysis","text":"seen previously, cttab function can easily populate simple tables.","code":""},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"simple-table","dir":"Articles","previous_headings":"More to cttab","what":"Simple table","title":"Use cttab in the Analysis","text":"Table variables, treatment arm variable selection.","code":"X <- cttab(   x = c(\"AGE\", \"SEX\", \"BMIBL\"), # Variable to report   data = df ) # Data X #> ┌───────────────────┬─────────────────┐ #> |                   │      Total      | #> ├───────────────────┴─────────────────┤ #> |Age                                  | #> ├───────────────────┬─────────────────┤ #> |  Valid Obs.       │       100       | #> |  Mean (SD)        │   75.1 (7.93)   | #> |  Median [Min, Max]│77.0 [56.0, 88.0]| #> ├───────────────────┴─────────────────┤ #> |Sex                                  | #> ├───────────────────┬─────────────────┤ #> |  Female           │  51/100 (51%)   | #> |  Male             │  49/100 (49%)   | #> ├───────────────────┴─────────────────┤ #> |Baseline BMI (kg/m^2)                | #> ├───────────────────┬─────────────────┤ #> |  Valid Obs.       │       100       | #> |  Mean (SD)        │   24.5 (4.15)   | #> |  Median [Min, Max]│24.4 [13.7, 33.6]| #> └───────────────────┴─────────────────┘"},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"by-group-and-filter","dir":"Articles","previous_headings":"More to cttab","what":"By group and filter","title":"Use cttab in the Analysis","text":"seen ","code":"X <- cttab(   x = c(\"AGE\", \"SEX\", \"BMIBL\"), # Variable to report   group = \"ARM\", # Group variable   data = df, # Data   select = c(\"BMIBL\" = \"RACEN != 1\") ) # Filter for variable BMI X #> ┌───────────────────┬─────────────────┬─────────────────┬─────────────────┐ #> |                   │     Placebo     │    Research     │      Total      | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Observation        │       48        │       52        │       100       | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Age                                                                      | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Valid Obs.       │       48        │       52        │       100       | #> |  Mean (SD)        │   75.5 (7.86)   │   74.8 (8.04)   │   75.1 (7.93)   | #> |  Median [Min, Max]│78.0 [57.0, 88.0]│77.0 [56.0, 88.0]│77.0 [56.0, 88.0]| #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Sex                                                                      | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Female           │   26/48 (54%)   │   25/52 (48%)   │  51/100 (51%)   | #> |  Male             │   22/48 (46%)   │   27/52 (52%)   │  49/100 (49%)   | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Baseline BMI (kg/m^2)                                                    | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Valid Obs.       │        5        │        6        │       11        | #> |  Mean (SD)        │   27.8 (3.98)   │   24.6 (3.54)   │   26.0 (3.93)   | #> |  Median [Min, Max]│27.9 [23.4, 32.8]│23.5 [21.3, 31.4]│24.3 [21.3, 32.8]| #> └───────────────────┴─────────────────┴─────────────────┴─────────────────┘"},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"split-table-row-by-visit","dir":"Articles","previous_headings":"More to cttab","what":"Split table row by visit","title":"Use cttab in the Analysis","text":"can define row_split parameter name visit repeat variable.","code":"attach_pop(\"1.1\") df <- extract_form(dt, \"Lab\", vars_keep = c(\"subjid\", \"ARM\"))  X <- cttab(   x = c(\"AST\", \"BILI\", \"ALT\"),   group = \"ARM\",   data = df,   row_split = \"AVISIT\", # Visit variable   select = c(\"ALT\" = \"PERF == 1\") ) X #> ┌───────────────────┬─────────────────┬─────────────────┬─────────────────┐ #> |                   │     Placebo     │    Research     │      Total      | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Study Visit = Baseline                                                   | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |Observation        │       48        │       52        │       100       | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Aspartate Aminotransferase (U/L)                                         | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Valid Obs.       │       47        │       52        │       99        | #> |  Mean (SD)        │   23.4 (7.09)   │   23.6 (7.05)   │   23.5 (7.04)   | #> |  Median [Min, Max]│23.0 [12.0, 54.0]│21.5 [13.0, 52.0]│23.0 [12.0, 54.0]| #> |  Missing          │     1 (2%)      │                 │     1 (1%)      | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Bilirubin (umol/L)                                                       | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Valid Obs.       │       46        │       51        │       97        | #> |  Mean (SD)        │   10.0 (4.38)   │   11.4 (6.01)   │   10.8 (5.32)   | #> |  Median [Min, Max]│8.55 [5.13, 25.7]│10.3 [5.13, 39.3]│10.3 [5.13, 39.3]| #> |  Missing          │     2 (4%)      │     1 (2%)      │     3 (3%)      | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Alanine Aminotransferase (U/L)                                           | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Valid Obs.       │       45        │       40        │       85        | #> |  Mean (SD)        │   18.1 (8.01)   │   22.1 (13.2)   │   20.0 (10.9)   | #> |  Median [Min, Max]│16.0 [7.00, 50.0]│17.0 [8.00, 64.0]│16.0 [7.00, 64.0]| #> |  Missing          │                 │     2 (5%)      │     2 (2%)      | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Study Visit = Week 4                                                     | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |Observation        │       43        │       44        │       87        | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Aspartate Aminotransferase (U/L)                                         | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Valid Obs.       │       41        │       43        │       84        | #> |  Mean (SD)        │   25.1 (18.4)   │   23.8 (6.39)   │   24.4 (13.6)   | #> |  Median [Min, Max]│23.0 [12.0, 135] │23.0 [12.0, 43.0]│23.0 [12.0, 135] | #> |  Missing          │     2 (5%)      │     1 (2%)      │     3 (3%)      | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Bilirubin (umol/L)                                                       | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Valid Obs.       │       42        │       44        │       86        | #> |  Mean (SD)        │   12.7 (18.2)   │   11.4 (6.51)   │   12.0 (13.5)   | #> |  Median [Min, Max]│8.55 [5.13, 125] │8.55 [5.13, 34.2]│8.55 [5.13, 125] | #> |  Missing          │     1 (2%)      │                 │     1 (1%)      | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Alanine Aminotransferase (U/L)                                           | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Valid Obs.       │       39        │       38        │       77        | #> |  Mean (SD)        │   18.9 (16.1)   │   21.6 (11.0)   │   20.2 (13.8)   | #> |  Median [Min, Max]│15.0 [7.00, 107] │20.0 [8.00, 61.0]│16.0 [7.00, 107] | #> |  Missing          │                 │     3 (7%)      │     3 (4%)      | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Study Visit = End of Treatment                                           | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |Observation        │       47        │       50        │       97        | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Aspartate Aminotransferase (U/L)                                         | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Valid Obs.       │       45        │       48        │       93        | #> |  Mean (SD)        │   27.4 (27.9)   │   23.1 (6.04)   │   25.2 (19.9)   | #> |  Median [Min, Max]│21.0 [14.0, 168] │23.0 [12.0, 39.0]│22.0 [12.0, 168] | #> |  Missing          │     2 (4%)      │     2 (4%)      │     4 (4%)      | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Bilirubin (umol/L)                                                       | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Valid Obs.       │       45        │       46        │       91        | #> |  Mean (SD)        │   12.5 (17.7)   │   11.5 (6.39)   │   12.0 (13.2)   | #> |  Median [Min, Max]│8.55 [5.13, 125] │10.3 [3.42, 30.8]│8.55 [3.42, 125] | #> |  Missing          │     2 (4%)      │     4 (8%)      │     6 (6%)      | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Alanine Aminotransferase (U/L)                                           | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Valid Obs.       │       45        │       43        │       88        | #> |  Mean (SD)        │   19.6 (21.8)   │   19.7 (8.41)   │   19.6 (16.6)   | #> |  Median [Min, Max]│14.0 [5.00, 124] │17.0 [9.00, 43.0]│16.0 [5.00, 124] | #> |  Missing          │                 │     1 (2%)      │     1 (1%)      | #> └───────────────────┴─────────────────┴─────────────────┴─────────────────┘"},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"group-variable","dir":"Articles","previous_headings":"More to cttab","what":"Group variable","title":"Use cttab in the Analysis","text":"example, report demographic variable, lab results lab abnormality. Variables grouped, group name given demographic variables, “Blood” lab results “Pts Abnormal” lab abnormality. , count number patients abnormal lab results. cttab report count percentage TRUE. useful want report patient numbers different condition belong one category. :","code":"# Prepare data as before attach_pop(\"1.1\") df <- extract_form(dt, \"PatientReg\", vars_keep = c(\"subjid\")) base_lab <- extract_form(dt, \"Lab\",   visit = \"SCREENING\",   vars_keep = c(\"subjid\") )  # Define abnormal base_lab$ABNORMALT <- base_lab$ALT > 22.5 var_lab(base_lab$ABNORMALT) <- \"ALT abnormal\" base_lab$ABNORMAST <- base_lab$AST > 25.5 var_lab(base_lab$ABNORMAST) <- \"AST abnormal\"  df <- merge(df, base_lab, by = \"subjid\")  # Table X <- cttab(   x = list(c(\"AGE\", \"SEX\", \"BMIBL\"),     # Group lab variable     \"Blood\" = c(\"ALT\", \"AST\"),     # Group abnormal variable     \"Pts with Abnormal\" = c(\"ABNORMAST\", \"ABNORMALT\")   ),   group = \"ARM\",   data = df,   # Add some filtering   select = c(     \"BMIBL\" = \"RACEN != 1\",     \"ALT\" = \"PERF == 1\"   ) ) X #> ┌───────────────────┬─────────────────┬─────────────────┬─────────────────┐ #> |                   │     Placebo     │    Research     │      Total      | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Observation        │       48        │       52        │       100       | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Age                                                                      | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Valid Obs.       │       48        │       52        │       100       | #> |  Mean (SD)        │   75.5 (7.86)   │   74.8 (8.04)   │   75.1 (7.93)   | #> |  Median [Min, Max]│78.0 [57.0, 88.0]│77.0 [56.0, 88.0]│77.0 [56.0, 88.0]| #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Sex                                                                      | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Female           │   26/48 (54%)   │   25/52 (48%)   │  51/100 (51%)   | #> |  Male             │   22/48 (46%)   │   27/52 (52%)   │  49/100 (49%)   | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Baseline BMI (kg/m^2)                                                    | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Valid Obs.       │        5        │        6        │       11        | #> |  Mean (SD)        │   27.8 (3.98)   │   24.6 (3.54)   │   26.0 (3.93)   | #> |  Median [Min, Max]│27.9 [23.4, 32.8]│23.5 [21.3, 31.4]│24.3 [21.3, 32.8]| #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Blood                                                                    | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Alanine Aminotransferase (U/L)                                           | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Valid Obs.       │       45        │       40        │       85        | #> |  Mean (SD)        │   18.1 (8.01)   │   22.1 (13.2)   │   20.0 (10.9)   | #> |  Median [Min, Max]│16.0 [7.00, 50.0]│17.0 [8.00, 64.0]│16.0 [7.00, 64.0]| #> |  Missing          │                 │     2 (5%)      │     2 (2%)      | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Aspartate Aminotransferase (U/L)                                         | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |  Valid Obs.       │       47        │       52        │       99        | #> |  Mean (SD)        │   23.4 (7.09)   │   23.6 (7.05)   │   23.5 (7.04)   | #> |  Median [Min, Max]│23.0 [12.0, 54.0]│21.5 [13.0, 52.0]│23.0 [12.0, 54.0]| #> |  Missing          │     1 (2%)      │                 │     1 (1%)      | #> ├───────────────────┴─────────────────┴─────────────────┴─────────────────┤ #> |Pts with Abnormal                                                        | #> ├───────────────────┬─────────────────┬─────────────────┬─────────────────┤ #> |AST abnormal       │   13/48 (27%)   │   17/52 (33%)   │  30/100 (30%)   | #> |ALT abnormal       │   9/48 (19%)    │   11/52 (21%)   │  20/100 (20%)   | #> └───────────────────┴─────────────────┴─────────────────┴─────────────────┘"},{"path":"https://cam-ctu.github.io/cctu/articles/using-cttab.html","id":"rounding","dir":"Articles","previous_headings":"More to cttab","what":"Rounding","title":"Use cttab in the Analysis","text":"default behaviour function keep one digits percentage 3 significant value numerical values. default rounding function signif_pad, can also use round round_pad keep digits summary. format_percent function used format percentage values. format_pval might useful .","code":"X <- cttab(   x = c(\"AGE\", \"SEX\", \"BMIBL\"), # Variable to report   group = \"ARM\", # Group variable   data = df, # Data   digits = 2, # Keep 2 digits for numerical   digits_pct = 1, # Keep 1 digits for percentage   rounding_fn = round ) # Use function round for rounding X #> ┌───────────────────┬─────────────────┬──────────────────┬──────────────────┐ #> |                   │     Placebo     │     Research     │      Total       | #> ├───────────────────┴─────────────────┴──────────────────┴──────────────────┤ #> |Observation        │       48        │        52        │       100        | #> ├───────────────────┬─────────────────┬──────────────────┬──────────────────┤ #> ├───────────────────┴─────────────────┴──────────────────┴──────────────────┤ #> |Age                                                                        | #> ├───────────────────┬─────────────────┬──────────────────┬──────────────────┤ #> |  Valid Obs.       │       48        │        52        │       100        | #> |  Mean (SD)        │  75.52 (7.86)   │   74.75 (8.04)   │   75.12 (7.93)   | #> |  Median [Min, Max]│   78 [57, 88]   │   77 [56, 88]    │   77 [56, 88]    | #> ├───────────────────┴─────────────────┴──────────────────┴──────────────────┤ #> |Sex                                                                        | #> ├───────────────────┬─────────────────┬──────────────────┬──────────────────┤ #> |  Female           │  26/48 (54.2%)  │  25/52 (48.1%)   │  51/100 (51.0%)  | #> |  Male             │  22/48 (45.8%)  │  27/52 (51.9%)   │  49/100 (49.0%)  | #> ├───────────────────┴─────────────────┴──────────────────┴──────────────────┤ #> |Baseline BMI (kg/m^2)                                                      | #> ├───────────────────┬─────────────────┬──────────────────┬──────────────────┤ #> |  Valid Obs.       │       48        │        52        │       100        | #> |  Mean (SD)        │  23.55 (4.05)   │   25.29 (4.1)    │   24.45 (4.15)   | #> |  Median [Min, Max]│23.1 [15.1, 33.3]│25.25 [13.7, 33.6]│24.35 [13.7, 33.6]| #> └───────────────────┴─────────────────┴──────────────────┴──────────────────┘"},{"path":"https://cam-ctu.github.io/cctu/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Simon Bond. Author, maintainer. Alimu Dayimu. Author.","code":""},{"path":"https://cam-ctu.github.io/cctu/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Bond S, Dayimu (2026). cctu: -House Functions Report Writing Cambridge Clinical Trials Unit. R package version 0.8.11, https://cam-ctu.github.io/cctu/.","code":"@Manual{,   title = {cctu: In-House Functions for Report Writing at Cambridge Clinical Trials Unit},   author = {Simon Bond and Alimu Dayimu},   year = {2026},   note = {R package version 0.8.11},   url = {https://cam-ctu.github.io/cctu/}, }"},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/index.html","id":"cctu","dir":"","previous_headings":"","what":"cctu","title":"In-House Functions for Report Writing at Cambridge Clinical Trials Unit","text":"goal cctu provide tools easily produce reports word take pain formatting tables, ensure right population always used.","code":""},{"path":"https://cam-ctu.github.io/cctu/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"In-House Functions for Report Writing at Cambridge Clinical Trials Unit","text":"can install GitHub version cctu :","code":"install.packages(\"devtools\") devtools::install_github(\"shug0131/cctu\")"},{"path":"https://cam-ctu.github.io/cctu/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"In-House Functions for Report Writing at Cambridge Clinical Trials Unit","text":"Go read vignettes","code":"browseVignettes(\"cctu\") #> No vignettes found by browseVignettes(\"cctu\")"},{"path":"https://cam-ctu.github.io/cctu/reference/all_is_numeric.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if All Elements in Character Vector are Numeric — all_is_numeric","title":"Check if All Elements in Character Vector are Numeric — all_is_numeric","text":"Tests, without issuing warnings, whether elements character vector legal numeric values, optionally converts vector  numeric vector. Leading trailing blanks x ignored.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/all_is_numeric.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if All Elements in Character Vector are Numeric — all_is_numeric","text":"","code":"all_is_numeric(x, extras = c(\".\", NA))"},{"path":"https://cam-ctu.github.io/cctu/reference/all_is_numeric.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if All Elements in Character Vector are Numeric — all_is_numeric","text":"x character vector extras vector character strings count numeric values, \"\".","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/all_is_numeric.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if All Elements in Character Vector are Numeric — all_is_numeric","text":"logical value","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/all_is_numeric.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check if All Elements in Character Vector are Numeric — all_is_numeric","text":"","code":"all_is_numeric(c(\"1\", \"1.2\", \"3\")) #> [1] TRUE all_is_numeric(c(\"1\", \"1.2\", \"3a\")) #> [1] FALSE"},{"path":"https://cam-ctu.github.io/cctu/reference/apply_macro_dict.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply DLU/CLU file to the data frame — apply_macro_dict","title":"Apply DLU/CLU file to the data frame — apply_macro_dict","text":"variable label attribute applied data frame DLU file.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/apply_macro_dict.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply DLU/CLU file to the data frame — apply_macro_dict","text":"","code":"apply_macro_dict(   data,   dlu,   clu = NULL,   date_format = c(\"%d/%m/%Y\", \"%Y-%m-%d\", \"%Y/%m/%d\"),   clean_names = TRUE,   rm_empty = getOption(\"cctu_rm_empty\", default = \"both\"),   check_catvar = FALSE )"},{"path":"https://cam-ctu.github.io/cctu/reference/apply_macro_dict.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply DLU/CLU file to the data frame — apply_macro_dict","text":"data Data frame applied. dlu Data frame DLU, see tidy_dlu requirements DLU. clu Data frame CLU, see details requirements CLU. date_format Date format tried .POSIXct, default c(\"%d/%m/%Y\", \"%Y-%m-%d\", \"%Y/%m/%d\"). can add formats may want try.  conversion skipped formatting succeed. clean_names Convert variable name lower case (default), also change values DLU well. See clean_names details. rm_empty Remove empty \"rows\", \"cols\", \"\" (default),  \"none\". remove_blank_rows_cols function   used clean empty rows /columns. data large,    take long time, set \"none\" case. Use options(cctu_rm_empty = \"none\") set global options. check_catvar Check values category variable (defined DLU file) contain non-numeric values converting variables numeric.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/apply_macro_dict.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply DLU/CLU file to the data frame — apply_macro_dict","text":"data.table object.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/apply_macro_dict.html","id":"overview","dir":"Reference","previous_headings":"","what":"Overview","title":"Apply DLU/CLU file to the data frame — apply_macro_dict","text":"function first convert data data.table. avoid variable attributes dropped base R functions.  use dlu file convert data corresponding variable  types. conversion data, variable value label attribute   created variable, see var_lab) val_lab. User can use lab2val conver value labels data values value label desired. clean_names set  TRUE, data name dl/clu cleaned, including  question names dlu. cleaned dlu data stored  cctu environment. used cttab populate missing report, see report_missing. can change set_dlu function, effect function, see set_dlu details. Please use get_dlu get dlu cleaned apply_macro_dict use tidy_dlu clean , function used apply_macro_dict clean DLU.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/apply_macro_dict.html","id":"variable-conversion-based-on-dlu-type","dir":"Reference","previous_headings":"","what":"Variable conversion based on DLU type","title":"Apply DLU/CLU file to the data frame — apply_macro_dict","text":"IntegerData: Convert numeric. Real: Convert numeric. Category: non-numeric characters variable,    conversion  performed, otherwise convert numeric. Date: Convert data date format .POSIXct.    date_format used feed    .POSIXct function conversion. Text: Convert character.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/apply_macro_dict.html","id":"clu-data-requirements","dir":"Reference","previous_headings":"","what":"CLU data requirements","title":"Apply DLU/CLU file to the data frame — apply_macro_dict","text":"CLU file contains three columns: ShortCode: Variable name downloaded data. CatCode: Category values, represents numeric code    item CRF. CatValue: Label category values, example.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/apply_macro_dict.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Apply DLU/CLU file to the data frame — apply_macro_dict","text":"","code":"# Read MACRO data dt <- read.csv(system.file(\"extdata\", \"pilotdata.csv\", package=\"cctu\"),                colClasses = \"character\") dlu <- read.csv(system.file(\"extdata\", \"pilotdata_dlu.csv\", package=\"cctu\")) clu <- read.csv(system.file(\"extdata\", \"pilotdata_clu.csv\", package=\"cctu\"))  # Create subjid dt$subjid <- substr(dt$USUBJID, 8, 11)  df <- apply_macro_dict(dt, dlu = dlu, clu = clu, clean_names = FALSE)  # Following can give you the same dlu file used by apply_macro_dict dlu <- tidy_dlu(dlu, clean_names = FALSE)  # Extract data from Lab form lb <- extract_form(df, \"Lab\")  # Extract screening visit data from lab form lb_base <- extract_form(df, \"Lab\", visit = \"SCREENING\")"},{"path":"https://cam-ctu.github.io/cctu/reference/attach_pop.html","id":null,"dir":"Reference","previous_headings":"","what":"Functions that attach and detach environments based on which populations are used for a given table number — attach_pop","title":"Functions that attach and detach environments based on which populations are used for a given table number — attach_pop","text":"Functions attach detach environments based populations used given table number","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/attach_pop.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Functions that attach and detach environments based on which populations are used for a given table number — attach_pop","text":"","code":"attach_pop(number, verbose = options()$verbose, rm_envir = TRUE)  detach_pop(number, verbose = options()$verbose)"},{"path":"https://cam-ctu.github.io/cctu/reference/attach_pop.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Functions that attach and detach environments based on which populations are used for a given table number — attach_pop","text":"number character string, number, giving number table figure. careful want '2.10' rather 2.1, say . verbose logical print information changes global environment external files. Defaults options()$verbose. rm_envir logical, default=TRUE. Whether run rm_envir first attaching population.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/attach_pop.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Functions that attach and detach environments based on which populations are used for a given table number — attach_pop","text":"invisibly returns environment attaching, NULL detaching.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/attach_pop.html","id":"functions","dir":"Reference","previous_headings":"","what":"Functions","title":"Functions that attach and detach environments based on which populations are used for a given table number — attach_pop","text":"attach_pop(): attaches population detach_pop(): detaches populations","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/cctab_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Create summary plot for cctab function — cctab_plot","title":"Create summary plot for cctab function — cctab_plot","text":"Create summary plot cctab function","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/cctab_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create summary plot for cctab function — cctab_plot","text":"","code":"cctab_plot(vars, data, group = NULL, row_split = NULL, select = NULL)"},{"path":"https://cam-ctu.github.io/cctu/reference/cctab_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create summary plot for cctab function — cctab_plot","text":"data data.frame variables vars taken. group Name grouping variable. row_split Variable used splitting table rows, rows split using variable. Useful repeated measures. select named vector many components row-variables. Every element `select` used select individuals analyzed  every row-variable. Name vector corresponds row variable,  element selection.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/cctu-package.html","id":null,"dir":"Reference","previous_headings":"","what":"cctu: A package for producing analysis reports from clinical trials — cctu-package","title":"cctu: A package for producing analysis reports from clinical trials — cctu-package","text":"package `cctu` designed help run analysis clinical trials typically produce output large word document one page per table figure following Statistical Analysis Plan, requires substantial audit trails. Automating trivialities getting tables word R, capturing meta data audit trials package achieves.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/cctu-package.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"cctu: A package for producing analysis reports from clinical trials — cctu-package","text":"See vignette vignette(\"analysis-template\", package=\"cctu\")  overview starting point.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/cctu-package.html","id":"key-functions","dir":"Reference","previous_headings":"","what":"Key Functions","title":"cctu: A package for producing analysis reports from clinical trials — cctu-package","text":"meta_table_example create_popn_envir attach_pop sumby write_table write_plot write_docx cttab apply_macro_dict regression_table","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/cctu-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"cctu: A package for producing analysis reports from clinical trials — cctu-package","text":"Maintainer: Simon Bond simon.bond7@nhs.net Authors: Alimu Dayimu","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/cctu_initialise.html","id":null,"dir":"Reference","previous_headings":"","what":"initialise objects for using cctu package — cctu_initialise","title":"initialise objects for using cctu package — cctu_initialise","text":"initialise  objects using cctu package","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/cctu_initialise.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"initialise objects for using cctu package — cctu_initialise","text":"","code":"cctu_initialise(   root = getwd(),   scripts = FALSE,   rm = FALSE,   description = TRUE,   output = getOption(\"cctu_output\", default = \"Output\") )  cctu_initialize(   root = getwd(),   scripts = FALSE,   rm = FALSE,   description = TRUE,   output = getOption(\"cctu_output\", default = \"Output\") )  cctu_check_dir(   root = getwd(),   warnings = FALSE,   output = getOption(\"cctu_output\", default = \"Output\") )  rm_output(   output = getOption(\"cctu_output\", default = \"Output\"),   core = TRUE,   figures = TRUE,   reports = TRUE,   top = TRUE )"},{"path":"https://cam-ctu.github.io/cctu/reference/cctu_initialise.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"initialise objects for using cctu package — cctu_initialise","text":"root root directory start scripts logical create standard set scripts. Intended used interactively start coding analysis. rm logical whether also run rm_output default values, delete files output directory. description logical,  whether create DESCRIPTION file one exist. output character string giving name output folder. Can overriden setting option(\"cctu_output\"). warnings logical indicator issue warning directories exist. Default FALSE. core logical delete files /Core figures logical delete files /Figures reports logical delete files /Reports top logical delete top level files core/figures/reports.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/cctu_initialise.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"initialise objects for using cctu package — cctu_initialise","text":"cctu_initialise gives invisible return logical indicating directories created. directories needed \"Output\", within \"Output\", \"Core\", \"Figures\", \"Reports\". also runs reset_code_tree(root) automatically. cctu_check_dir gives logical indicating directories exist,","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/cctu_initialise.html","id":"functions","dir":"Reference","previous_headings":"","what":"Functions","title":"initialise objects for using cctu package — cctu_initialise","text":"cctu_initialise(): create standard directories outputs needed. cctu_initialize(): identifical function American spelling cctu_check_dir(): Check directories exist cctu rm_output(): function clear previous output files, leaves directories place","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/clean_names.html","id":null,"dir":"Reference","previous_headings":"","what":"Tidies up names of a data frame within certain rules — clean_names","title":"Tidies up names of a data frame within certain rules — clean_names","text":"Tidies names data frame within certain rules","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/clean_names.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tidies up names of a data frame within certain rules — clean_names","text":"","code":"clean_names(df, convert = TRUE, verbose = options()$verbose)  clean_string(x)"},{"path":"https://cam-ctu.github.io/cctu/reference/clean_names.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Tidies up names of a data frame within certain rules — clean_names","text":"df data frame convert logical indicate want modify df parent environment, simply return character vector revised variable names. verbose logical print information changes global environment external files. Defaults options()$verbose. x character string cleaned.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/clean_names.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Tidies up names of a data frame within certain rules — clean_names","text":"df modified variable names lower case dots, slashes,+ replaced _ leading trailing whitespace variable called \"Nasty/Var+Name \" gets turned \"nasty_var_name\" . clean_names returns either vector cleaned names return directly, input object modified parent envirnoment (default) invisible copy modified input returned clean_string returns individual vector contents cleaned.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/clean_up.html","id":null,"dir":"Reference","previous_headings":"","what":"removes all the objects in the environment, apart from those listed in reserved and detaches the environment used to create tables or figures corresponding to the number — clean_up","title":"removes all the objects in the environment, apart from those listed in reserved and detaches the environment used to create tables or figures corresponding to the number — clean_up","text":"removes objects environment, apart listed reserved detaches environment used create tables figures corresponding number","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/clean_up.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"removes all the objects in the environment, apart from those listed in reserved and detaches the environment used to create tables or figures corresponding to the number — clean_up","text":"","code":"clean_up(   number,   frame = parent.frame(),   reserved_string = \".reserved\",   verbose = options()$verbose )"},{"path":"https://cam-ctu.github.io/cctu/reference/clean_up.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"removes all the objects in the environment, apart from those listed in reserved and detaches the environment used to create tables or figures corresponding to the number — clean_up","text":"number number associated table figure frame environment clean reserved_string character giving name global variable names gloabl objects generally preserved globally tidying . verbose logical print information changes global environment external files. Defaults options()$verbose.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/clean_up.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"removes all the objects in the environment, apart from those listed in reserved and detaches the environment used to create tables or figures corresponding to the number — clean_up","text":"NULL, removes objects","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/copy_lab.html","id":null,"dir":"Reference","previous_headings":"","what":"Copy variable label and value labels — copy_lab","title":"Copy variable label and value labels — copy_lab","text":"copy_lab copy variable label value labels returns old_var variable new_var return new_var.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/copy_lab.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Copy variable label and value labels — copy_lab","text":"","code":"copy_lab(new_var, old_var, strict = TRUE)"},{"path":"https://cam-ctu.github.io/cctu/reference/copy_lab.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Copy variable label and value labels — copy_lab","text":"new_var Variable copied . old_var Variable copied . strict variables mode.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/copy_lab.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Copy variable label and value labels — copy_lab","text":"copy_lab returns new_var variable label value labels old_var.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/copy_lab.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Copy variable label and value labels — copy_lab","text":"","code":"var_with_lab <- rep(1:2, 5) var_lab(var_with_lab) <- \"Income\" val_lab(var_with_lab) <- c(\"Low\" = 1, \"High\" = 2) var_nolab <- rep(1:2, 10) var_ut <- copy_lab(var_nolab, var_with_lab)"},{"path":"https://cam-ctu.github.io/cctu/reference/create_popn_envir.html","id":null,"dir":"Reference","previous_headings":"","what":"create environments contain a set of data frames filtered for each population — create_popn_envir","title":"create environments contain a set of data frames filtered for each population — create_popn_envir","text":"create environments contain set data frames filtered population","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/create_popn_envir.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"create environments contain a set of data frames filtered for each population — create_popn_envir","text":"","code":"create_popn_envir(   data_names,   popn,   subjid_string = \"subjid\",   rm_from_frame = TRUE,   frame = parent.frame(),   verbose = options()$verbose )"},{"path":"https://cam-ctu.github.io/cctu/reference/create_popn_envir.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"create environments contain a set of data frames filtered for each population — create_popn_envir","text":"data_names character vector key data frames filtered popn data frame one-row per participant  subjid variable column population indicating participant belongs population. names variables must match values meta_table$Population. subjid_string character naming column used data frame data_names popn, identify subjid. rm_from_frame logical indicating data sets removed frame environment frame frame original list data sets found,  new environments contained. verbose logical print information changes global environment external files. Defaults options()$verbose.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/create_popn_envir.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"create environments contain a set of data frames filtered for each population — create_popn_envir","text":"Now use data frames defined data_names  either directly call attach(safety), example look- attach_pop(1.01) table number. separate R environments made   populations population & population_title careful    use detach(safety) - automated write_table()    write_ggplot()","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/create_word_xml.html","id":null,"dir":"Reference","previous_headings":"","what":"Produces the final xml file — create_word_xml","title":"Produces the final xml file — create_word_xml","text":"Produces final xml file","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/create_word_xml.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Produces the final xml file — create_word_xml","text":"","code":"create_word_xml(   report_title,   author,   meta_table = get_meta_table(),   datestamp = format(Sys.time(), format = \"%H:%M %d %b %Y\"),   filename = file.path(getOption(\"cctu_output\", default = \"Output\"), \"Reports\",     \"Report.doc\"),   table_path = file.path(getOption(\"cctu_output\", default = \"Output\"), \"Core\"),   figure_format = c(\"png\", \"jpeg\", \"ps\"),   figure_path = file.path(getOption(\"cctu_output\", default = \"Output\"), \"Figures\"),   popn_labels = NULL,   verbose = options()$verbose,   xslt_file = system.file(\"extdata\", \"to_word.xslt\", package = \"cctu\"),   keep_xml = FALSE )"},{"path":"https://cam-ctu.github.io/cctu/reference/create_word_xml.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Produces the final xml file — create_word_xml","text":"report_title text string used label report title page author text string naming author meta_table data frame  contains meta information tables (title, population, number). Defaults get_meta_table() datestamp text used give date-time stamp, defaults system date/time time running function filename text string giving filename/path output word document table_path text string giving filepath tables folder. used directly open table files copy content. figure_format format look figure files building report (\"png\", \"jpeg\",\"ps\") figure_path text string giving filepath figures folder. used create reference within  word document. Hence needs  relative (output report) path \"../Figures\". Likely lead   empty figures report changed. popn_labels alternative text string giving labels used population - might want include population size... must match  correctly unique(meta_table$population), excluding rows blank,  , population given verbose logical print information changes global environment external files. Defaults options()$verbose. xslt_file text file containing xslt document. Default system.file(\"extdata\", \"xml_to_word.xslt\", package=\"cctu\"). keep_xml boolean compiled XML kept, used debugging purpose.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/create_word_xml.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Produces the final xml file — create_word_xml","text":"function run side-effects: creates xml document  glues together outputs meta data per meta-table   argument; transformation fo per xslt file, default can   opened word document.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/create_word_xml.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Produces the final xml file — create_word_xml","text":"suggest file.path used create non default  file paths, cope OS vaguaries.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/cttab.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate an table of descriptive statistics. — cttab","title":"Generate an table of descriptive statistics. — cttab","text":"wrapper function stat_tab, allowing grouped variables, split statistics table `row_split` variable.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/cttab.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate an table of descriptive statistics. — cttab","text":"","code":"cttab(x, ...)  # Default S3 method cttab(   x,   data,   group = NULL,   row_split = NULL,   total = TRUE,   select = NULL,   add_missing = TRUE,   add_obs = TRUE,   digits = getOption(\"cctu_digits\", default = 3),   digits_pct = getOption(\"cctu_digits_pct\", default = 0),   rounding_fn = signif_pad,   subjid_string = getOption(\"cctu_subjid_string\", default = \"subjid\"),   print_plot = getOption(\"cctu_print_plot\", default = TRUE),   render_num = getOption(\"cctu_render_num\", default = \"Median [Min, Max]\"),   logical_na_impute = c(FALSE, NA, TRUE),   blinded = getOption(\"cctu_blinded\", default = FALSE),   ... )  # S3 method for class 'formula' cttab(   x,   data,   total = TRUE,   select = NULL,   add_missing = TRUE,   add_obs = TRUE,   digits = getOption(\"cctu_digits\", default = 3),   digits_pct = getOption(\"cctu_digits_pct\", default = 0),   rounding_fn = signif_pad,   subjid_string = getOption(\"cctu_subjid_string\", default = \"subjid\"),   print_plot = getOption(\"cctu_print_plot\", default = TRUE),   render_num = getOption(\"cctu_render_num\", default = \"Median [Min, Max]\"),   logical_na_impute = c(FALSE, NA, TRUE),   blinded = getOption(\"cctu_blinded\", default = FALSE),   ... )"},{"path":"https://cam-ctu.github.io/cctu/reference/cttab.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate an table of descriptive statistics. — cttab","text":"x Variables used formula summary table. x formula, group variable  provided right side, use 1 grouping variable. row_split also provided right hand side formula separate using | grouping variable. example, age + sex ~ treat|cycle age + sex ~ 1|cycle without grouping. See details. ... used. data data.frame variables vars taken. group Name grouping variable. row_split Variable used splitting table rows, rows split using variable. Useful repeated measures. total \"Total\" column created (default). Specify FALSE omit column. select named vector many components row-variables. Every element `select` used select individuals analyzed  every row-variable. Name vector corresponds row variable,  element selection. add_missing missing number missing percentage   reported summary table, default `TRUE`. also produce data missingness report set TRUE. See report_missing details. add_obs Add observation row (default). digits integer specifying number significant digits keep, default 3. digits_pct integer specifying number digits decimal place percentages, default 0. rounding_fn function use rounding. Defaults signif_pad. round digits instead significant values, set round_pad. subjid_string character naming column used identify subject, default \"subjid\". print_plot logical value, print summary plot variables (default). render_num character vector indicating summary reported,  default \"Median [Min, Max]\". can change \"Median [Q1, Q3]\" median IQR reported instead \"Median [Min, Max]\". Use options(cctu_render_num = \"Median [IQR]\") set global options. See details render_numeric num_stat. logical_na_impute Impute missing values FALSE (default), NA keep , TRUE. nominator logical vector number TRUE. FALSE TRUE, denominator  values regardless missingness, non-missing number used denominator NA. Set FALSE want summarise multiple choice variables NA Yes/type logical variables want summary. can used named list x stack multiple  choice one category. blinded logical scalar, summary table report group (default) . ignore group set TRUE grouping summary reported.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/cttab.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate an table of descriptive statistics. — cttab","text":"matrix `cttab` class.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/cttab.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate an table of descriptive statistics. — cttab","text":"1. Parameter settings global options function parameters can set options. global effect cctab function. ideal way set global settings want effective globally. Currently, can set digits, digits_pct, subjid_string, print_plot, render_num blinded  adding \"cctu_\" prefix options. example,  can suppress plot printing setting options(cctu_print_plot = FALSE). 2. Formula interface two interfaces, default, typically takes variable vector data.frame x, formula interface. formula interface  less flexible, simpler use designed handle common use cases. formula version, formula expected two-sided formula. Left hand side variables summarised right hand side group /split  variable. include row splitting variable, use | separate row splitting variable grouping variable row split variable. example, age + sex ~ treat|visit. right hand side formula treated grouping  variable default. value 1 provided grouping variable,  example age + sex ~ 1 age + sex ~ 1|visit visit. 3. Return summary table attributes reutned, method writen rbind. can use rbind combine two tables without losing attributes. attribute position used produce nice table. three 4 possible values rows. Row name printed first column word table. styles applied row based position attributes.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/cttab.html","id":"methods-by-class-","dir":"Reference","previous_headings":"","what":"Methods (by class)","title":"Generate an table of descriptive statistics. — cttab","text":"cttab(default): default interface, x data.frame. cttab(formula): formula interface, x formula.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/cttab.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate an table of descriptive statistics. — cttab","text":"","code":"# Read data dt <- read.csv(system.file(\"extdata\", \"pilotdata.csv\", package=\"cctu\")) dlu <- read.csv(system.file(\"extdata\", \"pilotdata_dlu.csv\", package=\"cctu\")) clu <- read.csv(system.file(\"extdata\", \"pilotdata_clu.csv\", package=\"cctu\"))  dt$subjid <- substr(dt$USUBJID, 8, 11)  # Apply variable attributes dt <- apply_macro_dict(dt, dlu, clu, clean_names = FALSE)  # Extract form data to be analysed df <- extract_form(dt, \"PatientReg\", vars_keep = c(\"subjid\"))  ######################################################## #  Simple analysis no group and variable subset ###################################################### # Variable as a vector X <- cttab(x = c(\"AGE\", \"SEX\", \"BMIBL\"),              data = df,              select = c(\"BMIBL\" = \"RACEN != 1\"))   # Variable as a formula, equivalent to above X1 <- cttab(AGE + SEX + BMIBL ~ 1,             data = df,             select = c(\"BMIBL\" = \"RACEN != 1\"))   ############################################# #  Analysis by group ############################################ # Variable as a vector X <- cttab(x = c(\"AGE\", \"SEX\", \"BMIBL\"),              group = \"ARM\",              data = df,              select = c(\"BMIBL\" = \"RACEN != 1\"))   ############################################ # Analysis by group and cycles ############################################  df <- extract_form(dt, \"Lab\", vars_keep = c(\"subjid\", \"ARM\"))  X <- cttab(x = c(\"AST\", \"BILI\", \"ALT\"),                   group = \"ARM\",                   data = df,                   row_split = \"AVISIT\",                   select = c(\"ALT\" = \"PERF == 1\"))   ############################################ # Group variables ############################################  df <- extract_form(dt, \"PatientReg\", vars_keep = c(\"subjid\")) base_lab <- extract_form(dt, \"Lab\", visit = \"SCREENING\", vars_keep = c(\"subjid\"))  base_lab$ABNORMALT <- base_lab$ALT > 22.5 var_lab(base_lab$ABNORMALT) <- \"ALT abnormal\" base_lab$ABNORMAST <- base_lab$AST > 25.5 var_lab(base_lab$ABNORMAST) <- \"AST abnormal\"  df <- merge(df, base_lab, by = \"subjid\")  X <- cttab(x = list(c(\"AGE\", \"SEX\", \"BMIBL\"),                       \"Blood\" = c(\"ALT\", \"AST\"),                       \"Patients with Abnormal\" = c(\"ABNORMAST\", \"ABNORMALT\")),           group = \"ARM\",           data = df,           select = c(\"BMIBL\" = \"RACEN != 1\",                      \"ALT\" = \"PERF == 1\"))"},{"path":"https://cam-ctu.github.io/cctu/reference/data_table_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Provides a summary with date stamps of external data files. — data_table_summary","title":"Provides a summary with date stamps of external data files. — data_table_summary","text":"Provides summary date stamps external data files.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/data_table_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Provides a summary with date stamps of external data files. — data_table_summary","text":"","code":"data_table_summary(   data_table,   name_variable = \"name\",   file_variable = \"file\",   folder_variable = \"folder\",   mod_time_variable = \"mod_time\" )"},{"path":"https://cam-ctu.github.io/cctu/reference/data_table_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Provides a summary with date stamps of external data files. — data_table_summary","text":"data_table data frame containing meta-table file paths external data files, desired R object names. name_variable character string giving variable name within data object names referenced. Defaults \"name\". file_variable character string giving variable name within data file names referenced. Defaults \"file\". folder_variable character string giving variable name within data contains folder find external file. data_table_summary Looks getwd() empty. mod_time_variable character string given variable name created data_table_summary records time stamp external file last modified.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/data_table_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Provides a summary with date stamps of external data files. — data_table_summary","text":"data_table_summary returns data frame sumarising meta-table associated information time last modification full file paths.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/detect_invalid_utf8.html","id":null,"dir":"Reference","previous_headings":"","what":"Functions to detect and delete non-UTF8 characters, which the XML output will not like — detect_invalid_utf8","title":"Functions to detect and delete non-UTF8 characters, which the XML output will not like — detect_invalid_utf8","text":"Functions detect delete non-UTF8 characters, XML output like","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/detect_invalid_utf8.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Functions to detect and delete non-UTF8 characters, which the XML output will not like — detect_invalid_utf8","text":"","code":"detect_invalid_utf8(data)  remove_invalid_utf8(data)"},{"path":"https://cam-ctu.github.io/cctu/reference/detect_invalid_utf8.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Functions to detect and delete non-UTF8 characters, which the XML output will not like — detect_invalid_utf8","text":"data data.frame, typically input write_table","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/detect_invalid_utf8.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Functions to detect and delete non-UTF8 characters, which the XML output will not like — detect_invalid_utf8","text":"detect_invalid_utf8 returns data.frame gives column, row, value datum points contain invalid characters, zero-length data frame none present.  remove_invalid_utf8 replaces invalid characters empty string.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/detect_invalid_utf8.html","id":"functions","dir":"Reference","previous_headings":"","what":"Functions","title":"Functions to detect and delete non-UTF8 characters, which the XML output will not like — detect_invalid_utf8","text":"remove_invalid_utf8(): Function delete invalid UTF8 characters","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/dump_missing_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Save/Get/Reset missingness report — dump_missing_report","title":"Save/Get/Reset missingness report — dump_missing_report","text":"dump_missing_report can used save missingness report file. get_missing_report Return missingness report data. reset_missing_report Reset internal missingness report data  blank.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/dump_missing_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save/Get/Reset missingness report — dump_missing_report","text":"","code":"dump_missing_report(x = \"Output/variable_missing_report.csv\")  get_missing_report()  reset_missing_report()"},{"path":"https://cam-ctu.github.io/cctu/reference/dump_missing_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save/Get/Reset missingness report — dump_missing_report","text":"x File path report dumped . Default `Output` folder, named `variable_missing_report.csv`.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/extract_form.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract data by form from MACRO dataset — extract_form","title":"Extract data by form from MACRO dataset — extract_form","text":"Extract data form MACRO dataset. Data transformed long format adding new column `visit`.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/extract_form.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract data by form from MACRO dataset — extract_form","text":"","code":"extract_form(   data,   form,   visit = NULL,   vars_keep = NULL,   dlu = cctu_env$dlu,   rm_empty = getOption(\"cctu_rm_empty\", default = \"both\") )"},{"path":"https://cam-ctu.github.io/cctu/reference/extract_form.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract data by form from MACRO dataset — extract_form","text":"data data.frame macro dataset. form Name form DLU file, see tidy_dlu. visit character string vector visit name DLU file, see tidy_dlu. vars_keep Parameters keep output data. useful want keep treatment arm age variable. dlu DLU data.frame rm_empty Remove empty \"rows\", \"cols\", \"\" (default), \"none\". remove_blank_rows_cols function used clean empty rows /columns. Use options(cctu_rm_empty = \"none\") set global options.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/extract_form.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract data by form from MACRO dataset — extract_form","text":"data.table object.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/extract_form.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract data by form from MACRO dataset — extract_form","text":"","code":"# Read MACRO data dt <- read.csv(system.file(\"extdata\", \"pilotdata.csv\", package=\"cctu\"),                colClasses = \"character\") dlu <- read.csv(system.file(\"extdata\", \"pilotdata_dlu.csv\", package=\"cctu\")) clu <- read.csv(system.file(\"extdata\", \"pilotdata_clu.csv\", package=\"cctu\"))  # Create subjid dt$subjid <- substr(dt$USUBJID, 8, 11)  df <- apply_macro_dict(dt, dlu = dlu, clu = clu, clean_names = FALSE)  # Following can give you the same dlu file used by apply_macro_dict dlu <- tidy_dlu(dlu, clean_names = FALSE)  # Extract data from Lab form lb <- extract_form(df, \"Lab\")  # Extract screening visit data from lab form lb_base <- extract_form(df, \"Lab\", visit = \"SCREENING\")"},{"path":"https://cam-ctu.github.io/cctu/reference/find_common_prefix.html","id":null,"dir":"Reference","previous_headings":"","what":"Print methods for code_tree object S3 class inheritance means we dont' need this at all it will default to print.data.frame — find_common_prefix","title":"Print methods for code_tree object S3 class inheritance means we dont' need this at all it will default to print.data.frame — find_common_prefix","text":"Print methods code_tree object  S3 class inheritance means dont' need  default print.data.frame","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/find_common_prefix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print methods for code_tree object S3 class inheritance means we dont' need this at all it will default to print.data.frame — find_common_prefix","text":"","code":"find_common_prefix(vec)"},{"path":"https://cam-ctu.github.io/cctu/reference/format_percent.html","id":null,"dir":"Reference","previous_headings":"","what":"Format number to percent — format_percent","title":"Format number to percent — format_percent","text":"Format values percentage format. Multiply 100 add % symbol.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/format_percent.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format number to percent — format_percent","text":"","code":"format_percent(x, digits = 1, ...)"},{"path":"https://cam-ctu.github.io/cctu/reference/format_percent.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format number to percent — format_percent","text":"x Number format percentage. digits desired number digits decimal     point (format = \"f\") significant digits     (format = \"g\", = \"e\" = \"fg\"). Default: 2 integer, 4 real numbers.  less 0,     C default 6 digits used.  specified 50, 50     used warning unless format = \"f\"     limited typically 324. (15–21 digits need     accurate, depending OS compiler used.  limit     just precaution segfaults underlying C runtime.) ... arguments passed format.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/format_percent.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format number to percent — format_percent","text":"formatted percent character.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/format_pval.html","id":null,"dir":"Reference","previous_headings":"","what":"Format p-value — format_pval","title":"Format p-value — format_pval","text":"Format p-value","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/format_pval.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format p-value — format_pval","text":"","code":"format_pval(pvals, sig_limit = 10^(-digits), digits = 3)"},{"path":"https://cam-ctu.github.io/cctu/reference/format_pval.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format p-value — format_pval","text":"pvals numeric value vector p-values sig_limit Lower bound precision; smaller values shown < sig_limit digits Number digits past decimal point keep","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/format_pval.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format p-value — format_pval","text":"","code":"pv <- c(-1, 0.00001, 0.0042, 0.0601, 0.1335, 0.4999, 0.51, 0.89, 0.9, 1) format_pval(pv) #>  [1] \"<0.001\" \"<0.001\" \"0.004\"  \"0.060\"  \"0.134\"  \"0.500\"  \"0.510\"  \"0.890\"  #>  [9] \"0.900\"  \"1.000\""},{"path":"https://cam-ctu.github.io/cctu/reference/geom_stepribbon.html","id":null,"dir":"Reference","previous_headings":"","what":"Step ribbon plots. — geom_stepribbon","title":"Step ribbon plots. — geom_stepribbon","text":"geom_stepribbon extension geom_ribbon, optimized Kaplan-Meier plots pointwise confidence intervals confidence band. default direction-argument \"hv\" appropriate right-continuous step functions like hazard rates etc returned pammtools.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/geom_stepribbon.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Step ribbon plots. — geom_stepribbon","text":"","code":"geom_stepribbon(   mapping = NULL,   data = NULL,   stat = \"identity\",   position = \"identity\",   direction = \"hv\",   na.rm = FALSE,   show.legend = NA,   inherit.aes = TRUE,   ... )"},{"path":"https://cam-ctu.github.io/cctu/reference/geom_stepribbon.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Step ribbon plots. — geom_stepribbon","text":"mapping Set aesthetic mappings created aes(). specified inherit.aes = TRUE (default), combined default mapping top level plot. must supply mapping plot mapping. data data displayed layer. three options: NULL, default, data inherited plot data specified call ggplot(). data.frame, object, override plot data. objects fortified produce data frame. See fortify() variables created. function called single argument, plot data. return value must data.frame, used layer data. function can created formula (e.g. ~ head(.x, 10)). stat statistical transformation use data layer. using geom_*() function construct layer, stat argument can used override default coupling geoms stats. stat argument accepts following: Stat ggproto subclass, example StatCount. string naming stat. give stat string, strip function name stat_ prefix. example, use stat_count(), give stat \"count\". information ways specify stat, see layer stat documentation. position position adjustment use data layer. can used various ways, including prevent overplotting improving display. position argument accepts following: result calling position function, position_jitter(). method allows passing extra arguments position. string naming position adjustment. give position string, strip function name position_ prefix. example, use position_jitter(), give position \"jitter\". information ways specify position, see layer position documentation. direction direction stairs: 'vh' vertical horizontal, 'hv' horizontal vertical, 'mid' step half-way adjacent x-values. na.rm FALSE, default, missing values removed warning. TRUE, missing values silently removed. show.legend logical. layer included legends? NA, default, includes aesthetics mapped. FALSE never includes, TRUE always includes. can also named logical vector finely select aesthetics display. include legend keys levels, even data exists, use TRUE.  NA, levels shown legend, unobserved levels omitted. inherit.aes FALSE, overrides default aesthetics, rather combining . useful helper functions define data aesthetics inherit behaviour default plot specification, e.g. annotation_borders(). ... arguments passed layer()'s params argument. arguments broadly fall one 4 categories . Notably, arguments position argument, aesthetics required can passed .... Unknown arguments part 4 categories ignored. Static aesthetics mapped scale, fixed value apply layer whole. example, colour = \"red\" linewidth = 3. geom's documentation Aesthetics section lists available options. 'required' aesthetics passed params. Please note passing unmapped aesthetics vectors technically possible, order required length guaranteed parallel input data. constructing layer using stat_*() function, ... argument can used pass parameters geom part layer. example stat_density(geom = \"area\", outline.type = \"\"). geom's documentation lists parameters can accept. Inversely, constructing layer using geom_*() function, ... argument can used pass parameters stat part layer. example geom_area(stat = \"density\", adjust = 0.5). stat's documentation lists parameters can accept. key_glyph argument layer() may also passed .... can one functions described key glyphs, change display layer legend.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/geom_stepribbon.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Step ribbon plots. — geom_stepribbon","text":"","code":"library(ggplot2) huron <- data.frame(year = 1875:1972, level = as.vector(LakeHuron)) h <- ggplot(huron, aes(year)) h + geom_stepribbon(   aes(     ymin = level - 1,     ymax = level + 1   ),   fill = \"grey70\" ) +   geom_step(aes(y = level))  h + geom_ribbon(aes(ymin = level - 1, ymax = level + 1), fill = \"grey70\") +   geom_line(aes(y = level))"},{"path":"https://cam-ctu.github.io/cctu/reference/get_code_tree.html","id":null,"dir":"Reference","previous_headings":"","what":"track which files of code are called by which oher files — get_code_tree","title":"track which files of code are called by which oher files — get_code_tree","text":"track files code called oher files","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/get_code_tree.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"track which files of code are called by which oher files — get_code_tree","text":"","code":"get_code_tree()  reset_code_tree(root_file = \"main.R\")"},{"path":"https://cam-ctu.github.io/cctu/reference/get_code_tree.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"track which files of code are called by which oher files — get_code_tree","text":"root_file name code file want use initial root code tree","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/get_code_tree.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"track which files of code are called by which oher files — get_code_tree","text":"data file containing two variables: parent ; child.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/get_code_tree.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"track which files of code are called by which oher files — get_code_tree","text":"time cctu function source called, internal data frame appended parent file called source, child file sourced. can reset code_tree examine , directly edit . reset automatically cctu_initialise called.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/get_code_tree.html","id":"functions","dir":"Reference","previous_headings":"","what":"Functions","title":"track which files of code are called by which oher files — get_code_tree","text":"reset_code_tree(): reset internal code_tree object entries","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/get_meta_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Functions to handle meta_table — get_meta_table","title":"Functions to handle meta_table — get_meta_table","text":"Functions handle meta_table","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/get_meta_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Functions to handle meta_table — get_meta_table","text":"","code":"get_meta_table()  set_meta_table(meta_table)"},{"path":"https://cam-ctu.github.io/cctu/reference/get_meta_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Functions to handle meta_table — get_meta_table","text":"meta_table data.frame  set meta_table internal object","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/get_meta_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Functions to handle meta_table — get_meta_table","text":"get_table returns global object, set_table invisibly returns previous version","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/get_meta_table.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Functions to handle meta_table — get_meta_table","text":"set_meta_table(NULL) remove meta_table .","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/get_meta_table.html","id":"functions","dir":"Reference","previous_headings":"","what":"Functions","title":"Functions to handle meta_table — get_meta_table","text":"get_meta_table(): gets copy internal object set_meta_table(): sets internal object argument provided, whilst carrying cleaning","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/get_obj.html","id":null,"dir":"Reference","previous_headings":"","what":"Gets copies of objects from parent environments, or returns alternative if not found — get_obj","title":"Gets copies of objects from parent environments, or returns alternative if not found — get_obj","text":"Gets copies objects parent environments, returns alternative found","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/get_obj.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Gets copies of objects from parent environments, or returns alternative if not found — get_obj","text":"","code":"get_obj(name, frame = parent.frame(), alt = NULL)"},{"path":"https://cam-ctu.github.io/cctu/reference/get_obj.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Gets copies of objects from parent environments, or returns alternative if not found — get_obj","text":"name text string object find alt alternative return object found","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/get_obj.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Gets copies of objects from parent environments, or returns alternative if not found — get_obj","text":"either copy object name alternative  exist","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/get_obj.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Gets copies of objects from parent environments, or returns alternative if not found — get_obj","text":"designed use within functions library access  global objects, provide route avoid hard-coding specific variable  names . exported.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/get_obj.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Gets copies of objects from parent environments, or returns alternative if not found — get_obj","text":"","code":"library(cctu) rm(PATH) #> Warning: object 'PATH' not found cctu:::get_obj(\"PATH\") #> Warning: PATH not found #> NULL cctu:::get_obj(\"PATH\", alt = getwd()) #> Warning: PATH not found #> [1] \"/home/runner/work/cctu/cctu/docs/reference\" PATH <- \"C:/MyFile\" cctu:::get_obj(\"PATH\") #> [1] \"C:/MyFile\" cctu:::get_obj(\"PATH\", alt = getwd()) #> [1] \"C:/MyFile\""},{"path":"https://cam-ctu.github.io/cctu/reference/is_empty.html","id":null,"dir":"Reference","previous_headings":"","what":"Check whether string, list or vector is empty — is_empty","title":"Check whether string, list or vector is empty — is_empty","text":"function checks whether string character vector, list vector (numeric, atomic) empty .","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/is_empty.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check whether string, list or vector is empty — is_empty","text":"","code":"is_empty(x, na_empty = TRUE)"},{"path":"https://cam-ctu.github.io/cctu/reference/is_empty.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check whether string, list or vector is empty — is_empty","text":"x String, character vector, list, data.frame numeric vector factor. na_empty Logical, NA considered empty (default TRUE).","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/is_empty.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check whether string, list or vector is empty — is_empty","text":"Logical vector.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/is_empty.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check whether string, list or vector is empty — is_empty","text":"","code":"is_empty(\"test\") #>  test  #> FALSE  is_empty(\"\") #>       #> TRUE  is_empty(NA) #> [1] TRUE is_empty(NULL) #> [1] TRUE  # string is not empty is_empty(\" \") #>        #> FALSE   # however, this trimmed string is is_empty(trimws(\" \")) #>       #> TRUE   # numeric vector x <- 1 is_empty(x) #> [1] FALSE x <- x[-1] is_empty(x) #> [1] TRUE  # check multiple elements of character vectors is_empty(c(\"\", \"a\")) #>           a  #>  TRUE FALSE   # empty data frame d <- data.frame() is_empty(d) #> [1] TRUE  # empty list # is_empty(list(NULL))  # NA vector x <- rep(NA, 5) is_empty(x) #> [1] TRUE TRUE TRUE TRUE TRUE is_empty(x, na_empty = FALSE) #> [1] FALSE FALSE FALSE FALSE FALSE"},{"path":"https://cam-ctu.github.io/cctu/reference/km_ggplot.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a Kaplan-Meier plot using ggplot2 — km_ggplot","title":"Create a Kaplan-Meier plot using ggplot2 — km_ggplot","text":"Create Kaplan-Meier plot using ggplot2","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/km_ggplot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a Kaplan-Meier plot using ggplot2 — km_ggplot","text":"","code":"km_ggplot(   sfit,   xlabs = \"Time\",   ylabs = \"\",   strata_labs = NULL,   ystratalabs = deprecated(),   timeby = NULL,   pval = FALSE,   p_digits = getOption(\"cctu_p_digits\", default = 4),   ... )"},{"path":"https://cam-ctu.github.io/cctu/reference/km_ggplot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a Kaplan-Meier plot using ggplot2 — km_ggplot","text":"sfit survfit object xlabs x-axis label ylabs y-axis label strata_labs strata labels. left NULL defaults levels(summary(sfit)$strata) minor prettification. ystratalabs deprecated back compatibility. use strata_labs argument. timeby numeric: Default NULL use ggplot defaults, allows user specify gaps x-axis ticks pval logical: add p-value plot? p_digits integer: number decimal places use p-value. ... option parameters include `xlims` `ylims` set axes' ranges, defaults derived data: vectors length two giving min max.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/km_ggplot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a Kaplan-Meier plot using ggplot2 — km_ggplot","text":"list ggplot objects made: top figure table counts. object print plot method uses wrap_plots glue together. user can access  modify ggplot components desired.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/km_ggplot.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a Kaplan-Meier plot using ggplot2 — km_ggplot","text":"function return list `ggplot2` object. KM-plot stored `top` risktable stored `bottom`. can modifies normally draw plot `ggplot2`. can modify anything want except x-axis scale plot, otherwise x-axis KM-plot risk table align. packages, like `ggsurvfit`, can use draw KM-plot options.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/km_ggplot.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Create a Kaplan-Meier plot using ggplot2 — km_ggplot","text":"Original taken http://statbandit.wordpress.com/2011/03/08/-enhanced-kaplan-meier-plot/ modified authors cctu package.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/km_ggplot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a Kaplan-Meier plot using ggplot2 — km_ggplot","text":"","code":"library(survival) fit <- survfit(Surv(time, status) ~ rx, data = colon) km_ggplot(fit)  ## Change theme of the KM-plot p <- km_ggplot(fit) p$top <- p$top +   ggplot2::theme_classic() # Change the theme of the risktable p$bottom <- p$bottom +   ggplot2::theme_void()  plot(p)"},{"path":"https://cam-ctu.github.io/cctu/reference/lab2val.html","id":null,"dir":"Reference","previous_headings":"","what":"Replace vector/matrix/data.frame values with corresponding value labels. — lab2val","title":"Replace vector/matrix/data.frame values with corresponding value labels. — lab2val","text":"lab2val replaces vector/matrix/data.frame values corresponding value labels. labels values converted characters cases. labels variable remains unchanged.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/lab2val.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Replace vector/matrix/data.frame values with corresponding value labels. — lab2val","text":"","code":"lab2val(x)"},{"path":"https://cam-ctu.github.io/cctu/reference/lab2val.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Replace vector/matrix/data.frame values with corresponding value labels. — lab2val","text":"x vector/matrix/data.frame","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/lab2val.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Replace vector/matrix/data.frame values with corresponding value labels. — lab2val","text":"Object form x value labels instead values.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/lab2val.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Replace vector/matrix/data.frame values with corresponding value labels. — lab2val","text":"modified version `expss` package.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/lab2val.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Replace vector/matrix/data.frame values with corresponding value labels. — lab2val","text":"","code":"data(mtcars) mtcars <- within(mtcars, {   var_lab(mpg) <- NULL   val_lab(am) <- c(\" automatic\" = 0, \" manual\" = 1) })  table(lab2val(mtcars$am)) #>  #>  automatic     manual  #>         19         13   summary(lm(mpg ~ ., data = lab2val(mtcars[, c(\"mpg\", \"am\")]))) #>  #> Call: #> lm(formula = mpg ~ ., data = lab2val(mtcars[, c(\"mpg\", \"am\")])) #>  #> Residuals: #>     Min      1Q  Median      3Q     Max  #> -9.3923 -3.0923 -0.2974  3.2439  9.5077  #>  #> Coefficients: #>             Estimate Std. Error t value Pr(>|t|)     #> (Intercept)   17.147      1.125  15.247 1.13e-15 *** #> am manual      7.245      1.764   4.106 0.000285 *** #> --- #> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 #>  #> Residual standard error: 4.902 on 30 degrees of freedom #> Multiple R-squared:  0.3598,\tAdjusted R-squared:  0.3385  #> F-statistic: 16.86 on 1 and 30 DF,  p-value: 0.000285 #>"},{"path":"https://cam-ctu.github.io/cctu/reference/library_description.html","id":null,"dir":"Reference","previous_headings":"","what":"loads all the packages listed in the DESCRIPTION file — library_description","title":"loads all the packages listed in the DESCRIPTION file — library_description","text":"loads packages listed DESCRIPTION file","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/library_description.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"loads all the packages listed in the DESCRIPTION file — library_description","text":"","code":"library_description()"},{"path":"https://cam-ctu.github.io/cctu/reference/library_description.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"loads all the packages listed in the DESCRIPTION file — library_description","text":"list packages found DESCRIPTION","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/merge_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Merge vertically split data — merge_data","title":"Merge vertically split data — merge_data","text":"function can used MACRO dataset vertically split, must used combine horizontally split data variable names. rename variable dataset, including shortcode dlu clu files underscore number, combine single dataset. Returns list merged dataset, DLU CLU. Data, DLU CLU order. merged dataset, dlu clu can passed apply_macro_dict.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/merge_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Merge vertically split data — merge_data","text":"","code":"merge_data(datalist, dlulist, clulist)"},{"path":"https://cam-ctu.github.io/cctu/reference/merge_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Merge vertically split data — merge_data","text":"datalist list dataset dlulist list DLU data clulist list CLU data","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/merge_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Merge vertically split data — merge_data","text":"list three data.frame data: Merged dataset. dlu: Merged DLU data. clu: Merged CLU data.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/merge_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Merge vertically split data — merge_data","text":"","code":"# Read example data dt_a <- read.csv(system.file(\"extdata\", \"test_A.csv\", package=\"cctu\"),                  colClasses = \"character\") dt_b <- read.csv(system.file(\"extdata\", \"test_B.csv\", package=\"cctu\"),                  colClasses = \"character\")  # Read DLU and CLU dlu_a <- read.csv(system.file(\"extdata\", \"test_A_DLU.csv\", package=\"cctu\")) dlu_b <- read.csv(system.file(\"extdata\", \"test_B_DLU.csv\", package=\"cctu\")) clu_a <- read.csv(system.file(\"extdata\", \"test_A_CLU.csv\", package=\"cctu\")) clu_b <- read.csv(system.file(\"extdata\", \"test_B_CLU.csv\", package=\"cctu\"))  # Merge dataset with merge_data function res <- merge_data(datalist = list(dt_a, dt_b), dlulist = list(dlu_a, dlu_b),                   clulist = list(clu_a, clu_b)) dt <- res$data # Extract combined data dlu <- res$dlu # Extract combined DLU data clu <- res$clu # Extract combined CLU data  # Apply CLU and DLU files dt <- apply_macro_dict(dt, dlu = dlu, clu = clu, clean_names = FALSE)"},{"path":"https://cam-ctu.github.io/cctu/reference/meta_table_example.html","id":null,"dir":"Reference","previous_headings":"","what":"Example of a meta_table data frame — meta_table_example","title":"Example of a meta_table data frame — meta_table_example","text":"Example meta_table data frame","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/meta_table_example.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example of a meta_table data frame — meta_table_example","text":"","code":"meta_table_example"},{"path":"https://cam-ctu.github.io/cctu/reference/meta_table_example.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example of a meta_table data frame — meta_table_example","text":"dataset 10 columns 3 example rows section Section label help subdivide report title title individual item repoert subtitle optional subtitle values. Use empty string  subtitle wanted. number tem number, use link  attach_pop, write_table,  write_ggplot. population name population use item. See  create_popn_envir. orientation takes values \"portrait\" \"landscape\" determine  page orientation item margin takes values \"normal\" \"narrow\" determine page   margin item item takes values \"table\", \"figure\", far rarely \"text\".   create_word_xml expect exist 'table_XX.xml',    'figure_XX.png' 'text_XX.xml' appropriate 'XX' number     value. footnote1 optional footnote. Use empty string subtitle   wanted. footnote2 optional footnote. Use empty string subtitle  wanted. fontsize optional fontsize. Set font size used table  units 1/144 inch. Defaults 20 set.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/num_stat.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute some basic descriptive statistics. — num_stat","title":"Compute some basic descriptive statistics. — num_stat","text":"Values type factor, character logical treated categorical. logicals, two categories given labels `Yes` TRUE, `` FALSE.  Factor levels zero counts retained.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/num_stat.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute some basic descriptive statistics. — num_stat","text":"","code":"num_stat(x, digits = 3, digits_pct = 1, rounding_fn = signif_pad)  cat_stat(x, digits_pct = 1)"},{"path":"https://cam-ctu.github.io/cctu/reference/num_stat.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute some basic descriptive statistics. — num_stat","text":"x vector numeric, factor, character logical values. digits integer specifying number significant digits keep numerical results. See signif_pad. digits_pct integer specifying number significant digits keep percentage. rounding_fn function use rounding. Defaults signif_pad.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/num_stat.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute some basic descriptive statistics. — num_stat","text":"list. numeric x, list contains numeric elements: N: number non-missing values NMISS: number missing values SUM: sum non-missing values MEAN: mean non-missing values SD: standard deviation non-missing values MIN: minimum non-missing values MEDIAN: median non-missing values CV: percent coefficient variation   non-missing values GMEAN: geometric mean non-missing values   non-negative, NA GCV: percent geometric coefficient variation   non-missing values non-negative, NA GSD: geometric standard deviation non-missing    values non-negative, NA Q1: first quartile non-missing values   (alias q25) Q2: second quartile non-missing values   (alias q50 Median) Q3: third quartile non-missing values    (alias q75) IQR: inter-quartile range non-missing   values (.e., Q3 - Q1) x categorical (.e. factor, character logical), list contains sublist category, sublist contains numeric elements: FREQ: frequency count PCT: percent relative frequency, including NA   denominator PCTnoNA: percent relative frequency, excluding    NA denominator Nall: total count, including NA denominator N: total count, excluding NA denominator","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/num_stat.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute some basic descriptive statistics. — num_stat","text":"","code":"x <- exp(rnorm(100, 1, 1)) num_stat(x) #> $N #> [1] \"100\" #>  #> $NMISS #> [1] \"0\" #>  #> $SUM #> [1] \"465\" #>  #> $MEAN #> [1] \"4.65\" #>  #> $SD #> [1] \"6.35\" #>  #> $CV #> [1] \"136.5%\" #>  #> $GMEAN #> [1] \"2.79\" #>  #> $GCV #> [1] \"133.6%\" #>  #> $GSD #> [1] \"2.75\" #>  #> $MEDIAN #> [1] \"2.82\" #>  #> $MIN #> [1] \"0.199\" #>  #> $Q1 #>    25%  #> \"1.58\"  #>  #> $Q2 #>    50%  #> \"2.82\"  #>  #> $Q3 #>    75%  #> \"4.77\"  #>  #> $IQR #>    75%  #> \"3.18\"  #>  #> $MAX #> [1] \"42.8\" #>   y <- factor(sample(0:1, 99, replace = TRUE), labels = c(\"Female\", \"Male\")) y[1:10] <- NA cat_stat(y) #> $Female #> $Female$FREQ #> [1] 36 #>  #> $Female$PCT #> [1] \"36.4%\" #>  #> $Female$PCTnoNA #> [1] \"40.4%\" #>  #> $Female$Nall #> [1] 99 #>  #> $Female$N #> [1] 89 #>  #>  #> $Male #> $Male$FREQ #> [1] 53 #>  #> $Male$PCT #> [1] \"53.5%\" #>  #> $Male$PCTnoNA #> [1] \"59.6%\" #>  #> $Male$Nall #> [1] 99 #>  #> $Male$N #> [1] 89 #>  #>  cat_stat(is.na(y)) #> $Yes #> $Yes$FREQ #> [1] 10 #>  #> $Yes$PCT #> [1] \"10.1%\" #>  #> $Yes$PCTnoNA #> [1] \"10.1%\" #>  #> $Yes$Nall #> [1] 99 #>  #> $Yes$N #> [1] 99 #>  #>  #> $No #> $No$FREQ #> [1] 89 #>  #> $No$PCT #> [1] \"89.9%\" #>  #> $No$PCTnoNA #> [1] \"89.9%\" #>  #> $No$Nall #> [1] 99 #>  #> $No$N #> [1] 99 #>  #>"},{"path":"https://cam-ctu.github.io/cctu/reference/order_dewey.html","id":null,"dir":"Reference","previous_headings":"","what":"sorts inputs that look like Dewey decimal numbering — order_dewey","title":"sorts inputs that look like Dewey decimal numbering — order_dewey","text":"sorts inputs look like Dewey decimal numbering","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/order_dewey.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"sorts inputs that look like Dewey decimal numbering — order_dewey","text":"","code":"order_dewey(x)"},{"path":"https://cam-ctu.github.io/cctu/reference/order_dewey.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"sorts inputs that look like Dewey decimal numbering — order_dewey","text":"x vector character strings","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/order_dewey.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"sorts inputs that look like Dewey decimal numbering — order_dewey","text":"numeric vector sorts input per dewey decimal system, without confusing 10.2, vs 10.10","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/p_format.html","id":null,"dir":"Reference","previous_headings":"","what":"formats p values with rounding and <0.001 — p_format","title":"formats p values with rounding and <0.001 — p_format","text":"formats p values rounding <0.001","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/p_format.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"formats p values with rounding and <0.001 — p_format","text":"","code":"p_format(p, digits = 3)"},{"path":"https://cam-ctu.github.io/cctu/reference/p_format.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"formats p values with rounding and <0.001 — p_format","text":"p vector numeric p-values digits number digits round , define threshold use < symbol","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/p_format.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"formats p values with rounding and <0.001 — p_format","text":"character vector formated p-values","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/p_format.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"formats p values with rounding and <0.001 — p_format","text":"","code":"p_format(c(0.000001, 0.451234)) #> [1] \"<0.001\" \" 0.451\""},{"path":"https://cam-ctu.github.io/cctu/reference/plot.code_tree.html","id":null,"dir":"Reference","previous_headings":"","what":"plot the code tree. — plot.code_tree","title":"plot the code tree. — plot.code_tree","text":"plot code tree.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/plot.code_tree.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"plot the code tree. — plot.code_tree","text":"","code":"# S3 method for class 'code_tree' plot(x, root_file = \"main.R\", ...)"},{"path":"https://cam-ctu.github.io/cctu/reference/plot.code_tree.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"plot the code tree. — plot.code_tree","text":"x code tree object get_code_tree. root_file name code file want use initial root code tree ... parameters passed plot.igraph","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/plot.code_tree.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"plot the code tree. — plot.code_tree","text":"","code":"if (FALSE) { # \\dontrun{ plot(get_code_tree(), root_file = \"main.R\") } # }"},{"path":"https://cam-ctu.github.io/cctu/reference/plot.km_ggplot.html","id":null,"dir":"Reference","previous_headings":"","what":"plot methods for km_ggplot object — plot.km_ggplot","title":"plot methods for km_ggplot object — plot.km_ggplot","text":"plot methods km_ggplot object","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/plot.km_ggplot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"plot methods for km_ggplot object — plot.km_ggplot","text":"","code":"# S3 method for class 'km_ggplot' plot(x, ...)"},{"path":"https://cam-ctu.github.io/cctu/reference/plot.km_ggplot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"plot methods for km_ggplot object — plot.km_ggplot","text":"x km_ggplot object ... arguments generic methods","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/print.cttab.html","id":null,"dir":"Reference","previous_headings":"","what":"Print — print.cttab","title":"Print — print.cttab","text":"Print method `cttab`","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/print.cttab.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print — print.cttab","text":"","code":"# S3 method for class 'cttab' print(x, indent = \"  \", ...)"},{"path":"https://cam-ctu.github.io/cctu/reference/print.cttab.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print — print.cttab","text":"x Table generated cttab. indent Indent string, default two space. ... used.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/print.km_ggplot.html","id":null,"dir":"Reference","previous_headings":"","what":"print methods for km_ggplot object — print.km_ggplot","title":"print methods for km_ggplot object — print.km_ggplot","text":"print methods km_ggplot object","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/print.km_ggplot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"print methods for km_ggplot object — print.km_ggplot","text":"","code":"# S3 method for class 'km_ggplot' print(x, ...)"},{"path":"https://cam-ctu.github.io/cctu/reference/print.km_ggplot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"print methods for km_ggplot object — print.km_ggplot","text":"x km_ggplot object ... arguments generic methods","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/propercase.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to convert text to proper case — propercase","title":"Function to convert text to proper case — propercase","text":"Function convert text proper case","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/propercase.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to convert text to proper case — propercase","text":"","code":"propercase(text)"},{"path":"https://cam-ctu.github.io/cctu/reference/propercase.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to convert text to proper case — propercase","text":"text character vector","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/propercase.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to convert text to proper case — propercase","text":"character vector converted \"proper\" case, word starts capital, subsequent letters lower case","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/rbind.cttab.html","id":null,"dir":"Reference","previous_headings":"","what":"Combine descriptive statistics table by rows — rbind.cttab","title":"Combine descriptive statistics table by rows — rbind.cttab","text":"Combine descriptive statistics table rows","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/rbind.cttab.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Combine descriptive statistics table by rows — rbind.cttab","text":"","code":"# S3 method for class 'cttab' rbind(...)"},{"path":"https://cam-ctu.github.io/cctu/reference/rbind.cttab.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Combine descriptive statistics table by rows — rbind.cttab","text":"... stat_tab descriptive statistics table .","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/rbind_space.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to bind tables/matrices with a blank row between them — rbind_space","title":"Function to bind tables/matrices with a blank row between them — rbind_space","text":"Function bind tables/matrices blank row ","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/rbind_space.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to bind tables/matrices with a blank row between them — rbind_space","text":"","code":"rbind_space(x, y, check.names = FALSE)"},{"path":"https://cam-ctu.github.io/cctu/reference/rbind_space.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to bind tables/matrices with a blank row between them — rbind_space","text":"x data.frame array, possibly character elements y data.frame array, number columns x check.names logical. FALSE names preserved x, TRUE converted syntactically valid variable names, may desired table report.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/rbind_space.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to bind tables/matrices with a blank row between them — rbind_space","text":"data.frame array x stacked vertically y row blank values -. Useful formatting","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/rbind_space.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Function to bind tables/matrices with a blank row between them — rbind_space","text":"based largely rbind function. Use conjunction Reduce join two tables.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/read_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Automatic reading in data from a meta-table of external data sets. — read_data","title":"Automatic reading in data from a meta-table of external data sets. — read_data","text":"Automatic reading data meta-table external data sets.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/read_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Automatic reading in data from a meta-table of external data sets. — read_data","text":"","code":"read_data(x, ...)  # S3 method for class 'data.frame' read_data(x, name_variable = \"name\", file_variable = \"file\", ...)  # S3 method for class 'character' read_data(   x,   data_table,   fun = NULL,   frame = parent.frame(),   name_variable = \"name\",   file_variable = \"file\",   clean_names_option = FALSE,   remove_blank_rows_cols_option = FALSE,   ... )"},{"path":"https://cam-ctu.github.io/cctu/reference/read_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Automatic reading in data from a meta-table of external data sets. — read_data","text":"x character string data.frame.  character name object created, referenced within data find  file path. dataframe read_data repeated across  rows data.frame. ... arguments supply fun. name_variable character string giving variable name within data object names referenced. Defaults \"name\". file_variable character string giving variable name within data file names referenced. Defaults \"file\". data_table data frame containing meta-table file paths external data files, desired R object names. fun function used read data file. unspecified picks file extensions \".xsl\" \".xslx\" use readxl::read_xls  readxl::read_xlsx, otherwise uses read.csv.  actually function applied file path character string   extracted data_table, warning issued function    name contain \"read\". frame Environment object name given x created. Default parent.frame(). NULL data read returned  assignment. clean_names_option logical apply clean_names function internally. Defaults FALSE compatibility apply_macro_dict. remove_blank_rows_cols_option logical apply remove_blank_rows_cols function internally. Defaults FALSE compatibility apply_macro_dict.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/read_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Automatic reading in data from a meta-table of external data sets. — read_data","text":"read_data assigns returns data frame reading data external file","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/read_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Automatic reading in data from a meta-table of external data sets. — read_data","text":"idea improve tracibility reading external data. used two steps: create meta-table R minimum  2 columns, one name R data.frame created,  giving file path external data; use read_data  wrapper read data specified. ends less code,  allows table extenral data associated meta-data easily produced using data_table_summary. options(\"verbose\")  TRUE read_data display messages describing  objects created. generic method methods defined character string, data.frame. former just reads one data.frame, latter reads  data.frames specified.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/read_data.html","id":"methods-by-class-","dir":"Reference","previous_headings":"","what":"Methods (by class)","title":"Automatic reading in data from a meta-table of external data sets. — read_data","text":"read_data(data.frame): data.frame method read_data generic read_data(character): character method read_data generic","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/read_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Automatic reading in data from a meta-table of external data sets. — read_data","text":"","code":"data_table <- data.frame(   name = c(\"dirtydata\", \"meta\"),   file = c(\"dirtydata.csv\", \"meta_table.xlsx\"),   folder = system.file(\"extdata\", package = \"cctu\"),   stringsAsFactors = FALSE ) data_table_summary(data_table) #>        name            file                                       folder #> 1 dirtydata   dirtydata.csv /home/runner/work/_temp/Library/cctu/extdata #> 2      meta meta_table.xlsx /home/runner/work/_temp/Library/cctu/extdata #>              mod_time #> 1 2026-01-12 15:13:43 #> 2 2026-01-12 15:13:43 #>                                                 full_file_path #> 1   /home/runner/work/_temp/Library/cctu/extdata/dirtydata.csv #> 2 /home/runner/work/_temp/Library/cctu/extdata/meta_table.xlsx options(\"verbose\" = TRUE) read_data(data_table) #> object created in : dirtydata #> now dyn.load(\"/home/runner/work/_temp/Library/readxl/libs/readxl.so\") ... #> object created in : meta summary(dirtydata) #>    Subject_Id        age           gender            Treatment   #>  Min.   :1.00   Min.   :19.00   Length:8           Min.   :1.0   #>  1st Qu.:2.25   1st Qu.:24.50   Class :character   1st Qu.:1.0   #>  Median :3.50   Median :40.00   Mode  :character   Median :1.5   #>  Mean   :3.50   Mean   :38.33                      Mean   :1.5   #>  3rd Qu.:4.75   3rd Qu.:51.75                      3rd Qu.:2.0   #>  Max.   :6.00   Max.   :56.00                      Max.   :2.0   #>  NA's   :2      NA's   :2                          NA's   :2     #>   start_date           outcome    missing        comments       #>  Length:8           Min.   :0.0   Mode:logical   Mode:logical   #>  Class :character   1st Qu.:0.0   NA's:8         NA's:8         #>  Mode  :character   Median :0.5                                 #>                     Mean   :0.5                                 #>                     3rd Qu.:1.0                                 #>                     Max.   :1.0                                 #>                     NA's   :2                                   summary(meta) #>   Completed         Checked          Section             Title           #>  Length:4           Mode:logical   Length:4           Length:4           #>  Class :character   NA's:4         Class :character   Class :character   #>  Mode  :character                  Mode  :character   Mode  :character   #>                                                                          #>                                                                          #>                                                                          #>                                                                          #>    Subtitle            Number           Population        Orientation        #>  Length:4           Length:4           Length:4           Length:4           #>  Class :character   Class :character   Class :character   Class :character   #>  Mode  :character   Mode  :character   Mode  :character   Mode  :character   #>                                                                              #>                                                                              #>                                                                              #>                                                                              #>  Program            Item             Junk         Endpoint       #>  Mode:logical   Length:4           Mode:logical   Mode:logical   #>  NA's:4         Class :character   NA's:4         NA's:4         #>                 Mode  :character                                 #>                                                                  #>                                                                  #>                                                                  #>                                                                  #>  Time Points or how to conglomerate Covariates or Subgroups Summary Statistics #>  Length:4                           Length:4                Length:4           #>  Class :character                   Class :character        Class :character   #>  Mode  :character                   Mode  :character        Mode  :character   #>                                                                                #>                                                                                #>                                                                                #>                                                                                #>  Formal Analysis  Footnote1         Footnote2         fontsize  #>  Mode:logical    Length:4           Mode:logical   Min.   :16   #>  NA's:4          Class :character   NA's:4         1st Qu.:17   #>                  Mode  :character                  Median :18   #>                                                    Mean   :18   #>                                                    3rd Qu.:19   #>                                                    Max.   :20   #>                                                    NA's   :1"},{"path":"https://cam-ctu.github.io/cctu/reference/regression_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Produce a table summarising a regression model for a study report — regression_table","title":"Produce a table summarising a regression model for a study report — regression_table","text":"Produce table summarising regression model study report","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/regression_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Produce a table summarising a regression model for a study report — regression_table","text":"","code":"regression_table(   x,   labels = names(coef(x)),   digits = getOption(\"cctu_digits\", default = 3),   p_digits = getOption(\"cctu_p_digits\", default = 4),   trans = if (class(x)[1] %in% c(\"glm\", \"coxph\")) {      exp  } else {      NULL  },   level = 0.95,   col_names = guess_col_names(x, trans) )"},{"path":"https://cam-ctu.github.io/cctu/reference/regression_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Produce a table summarising a regression model for a study report — regression_table","text":"x regression object labels character vector describing meaning coefficient parameters plain English digits integer giving number significant figures print p_digits integer giving number digits print p-values, print \"<0.001\" example trans function transform coefficients , e.g. present odds ratios, well log-odds ratios. intelligent tries guess transformation exp, may wrong. level value unit interval use calculating confidence intervals col_names character vector column labels. intelligently tries guess based class x transformation, may wrong.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/regression_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Produce a table summarising a regression model for a study report — regression_table","text":"matrix giving standard inference coefficients, SE, confidence intervals, p-values, plus brief summary number data points residual error variance.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/regression_table.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Produce a table summarising a regression model for a study report — regression_table","text":"methods exists x following classes: lm, glm, gls, lme, coxph, gee. Extensions classes may written defining methods coef_table covar functions","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/regression_table.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Produce a table summarising a regression model for a study report — regression_table","text":"","code":"library(survival) #> Warning: package ‘survival’ already present in search() cfit1 <- coxph(Surv(time, status) ~ age + sex + wt.loss, data = lung) regression_table(cfit1,   digits = 4,   labels = c(     \"Age (per year)\", \"Sex (Female vs Male)\",     \"Weight loss (per pound)\"   ) ) #>                 Parameter          Log HR (SE)     HR     Conf. Int. p-value #> 1          Age (per year)   0.02009 (0.009664)  1.020   1.001, 1.040  0.0377 #> 2    Sex (Female vs Male)     -0.5210 (0.1744) 0.5939 0.4220, 0.8359  0.0028 #> 3 Weight loss (per pound) 0.0007596 (0.006193)  1.001  0.9887, 1.013  0.9024 #> 4                                                                            #> 5  Number of Observations                  214                               #> 6        Number of Events                  152"},{"path":"https://cam-ctu.github.io/cctu/reference/remove_blank_rows_cols.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to remove blank rows/columns from a df — remove_blank_rows_cols","title":"Function to remove blank rows/columns from a df — remove_blank_rows_cols","text":"Function remove blank rows/columns df","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/remove_blank_rows_cols.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to remove blank rows/columns from a df — remove_blank_rows_cols","text":"","code":"remove_blank_rows_cols(   df,   convert = TRUE,   verbose = options()$verbose,   which = c(\"both\", \"rows\", \"cols\") )"},{"path":"https://cam-ctu.github.io/cctu/reference/remove_blank_rows_cols.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to remove blank rows/columns from a df — remove_blank_rows_cols","text":"df data.frame convert logical indicate want modify df parent environment, simply return modified version df verbose logical print information changes global environment external files. Defaults options()$verbose. one \"rows\", \"cols\", \"\". Default \"\" removing empty rows empty columns.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/remove_blank_rows_cols.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to remove blank rows/columns from a df — remove_blank_rows_cols","text":"removes columns rows totally empty (either \"\" NA).","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/render_cat.html","id":null,"dir":"Reference","previous_headings":"","what":"Render categorical values for table output. — render_cat","title":"Render categorical values for table output. — render_cat","text":"Called cttab default render categorical (.e. factor, character logical) values displaying table.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/render_cat.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Render categorical values for table output. — render_cat","text":"","code":"render_cat(x, ...)"},{"path":"https://cam-ctu.github.io/cctu/reference/render_cat.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Render categorical values for table output. — render_cat","text":"x vector type factor, character logical. ... arguments, passed cat_stat.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/render_cat.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Render categorical values for table output. — render_cat","text":"character vector. element displayed separate cell table. names vector labels use table.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/render_cat.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Render categorical values for table output. — render_cat","text":"function used link{cttab} render categorical variables. essentially uses values returned cat_stat put values vector. can modified show values want, checkout example .","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/render_cat.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Render categorical values for table output. — render_cat","text":"","code":"y <- factor(sample(0:1, 99, replace = TRUE), labels = c(\"Female\", \"Male\")) y[1:10] <- NA render_cat(y) #>          Female            Male  #> \"36/89 (40.4%)\" \"53/89 (59.6%)\""},{"path":"https://cam-ctu.github.io/cctu/reference/render_numeric.html","id":null,"dir":"Reference","previous_headings":"","what":"Render continuous values for table output. — render_numeric","title":"Render continuous values for table output. — render_numeric","text":"Called cttab default render continuous (.e. numeric) values displaying table.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/render_numeric.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Render continuous values for table output. — render_numeric","text":"","code":"render_numeric(x, what = \"Median [Min, Max]\", ...)"},{"path":"https://cam-ctu.github.io/cctu/reference/render_numeric.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Render continuous values for table output. — render_numeric","text":"x numeric vector. character vector reported numeric variables, default median min, max. See num_stat supported statistics. provided name used statistic names (printed table), values statistics reported. want fancy name, use named vector names statistics printed values statistics. example, c(\"Geo. Mean (Geo. CV%)\" = \"GMean (GCV)\", \"Median [IQR]\" = \"Median [Q1, Q3]\"). latter case, user visible statistics called \"Median [IQR]\" name printed. underlying summarised statistics median, Q1 Q3. Separate statistics comma space non-letters. ... arguments, passed num_stat.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/render_numeric.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Render continuous values for table output. — render_numeric","text":"character vector. element displayed separate cell table. names vector labels use table.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/render_numeric.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Render continuous values for table output. — render_numeric","text":"function used link{cttab} render numeric variables. essentially uses values returned num_stat put values vector.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/render_numeric.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Render continuous values for table output. — render_numeric","text":"","code":"x <- exp(rnorm(100, 1, 1)) render_numeric(x) #>           Valid Obs.            Mean (SD)    Median [Min, Max]  #>                \"100\"        \"4.59 (4.97)\" \"2.83 [0.308, 23.5]\""},{"path":"https://cam-ctu.github.io/cctu/reference/report_missing.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate missing report — report_missing","title":"Generate missing report — report_missing","text":"function use method described cctab, reporting missingness variables. includes form variable ,  set `Derived` DLU file. missing percentage  subjects missing value particular variable.  internal function, intend use directly user.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/report_missing.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate missing report — report_missing","text":"","code":"report_missing(   data,   vars,   select,   row_split = NULL,   subjid_string = getOption(\"cctu_subjid_string\", default = \"subjid\") )"},{"path":"https://cam-ctu.github.io/cctu/reference/report_missing.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate missing report — report_missing","text":"data data.frame variables vars taken. select named vector many components row-variables. Every element `select` used select individuals analyzed  every row-variable. Name vector corresponds row variable,  element selection. row_split Variable used splitting table rows, rows split using variable. Useful repeated measures. subjid_string character naming column used identify subject, default \"subjid\".","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/report_missing.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate missing report — report_missing","text":"data frame","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/report_missing.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate missing report — report_missing","text":"requires access data.frame DLU file, derived package environment set using get_dlu.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/rm_envir.html","id":null,"dir":"Reference","previous_headings":"","what":"A function to remove all attached objects from the search path with any exceptions specified — rm_envir","title":"A function to remove all attached objects from the search path with any exceptions specified — rm_envir","text":"function remove attached objects search path exceptions specified","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/rm_envir.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A function to remove all attached objects from the search path with any exceptions specified — rm_envir","text":"","code":"rm_envir(   ignore = c(\".GlobalEnv\", \"package:\", \"tools:\", \"Autoloads\"),   verbose = options()$verbose,   perl = FALSE )"},{"path":"https://cam-ctu.github.io/cctu/reference/rm_envir.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"A function to remove all attached objects from the search path with any exceptions specified — rm_envir","text":"ignore character vector regular expression search terms  within output search() retained. verbose logical print information changes global environment external files. Defaults options()$verbose. perl logical.  Perl-compatible regexps used?","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/rm_envir.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"A function to remove all attached objects from the search path with any exceptions specified — rm_envir","text":"detaches anything ignored. called default within  attach_pop .","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/run_batch.html","id":null,"dir":"Reference","previous_headings":"","what":"Runs a script in batch mode directly from within R. — run_batch","title":"Runs a script in batch mode directly from within R. — run_batch","text":"function allow R CMD BATCH called interactively, without needing start command line terminal change directories etc. calls R CMD BATCH current working directory. Hence value  producing side-effects: whatever happens script run. Plus log file created working directory name script suffix changed '.Rout'.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/run_batch.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Runs a script in batch mode directly from within R. — run_batch","text":"","code":"run_batch(filename, ...)"},{"path":"https://cam-ctu.github.io/cctu/reference/run_batch.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Runs a script in batch mode directly from within R. — run_batch","text":"filename character string name path script (relative working directory). ... arguments pass system","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/run_batch.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Runs a script in batch mode directly from within R. — run_batch","text":"see system called.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/run_batch.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Runs a script in batch mode directly from within R. — run_batch","text":"command run environments interactive false, prevent infinite loops.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/set_dlu.html","id":null,"dir":"Reference","previous_headings":"","what":"Set/get DLU data — set_dlu","title":"Set/get DLU data — set_dlu","text":"set_dlu set provided DLU data package environment,  can used missing data report cttab. user's  responsibility make sure values short code provided DLU  data matches variable names dataset. set_dlu   effect apply_macro_dict. Instead,   apply_macro_dict override `DLU` seetings done set_dlu. get_dlu can used get copy DLU data stored set_dlu.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/set_dlu.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set/get DLU data — set_dlu","text":"","code":"set_dlu(x, clean_names = TRUE)  get_dlu()"},{"path":"https://cam-ctu.github.io/cctu/reference/set_dlu.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set/get DLU data — set_dlu","text":"x DLU data clean_names Conver variable name lower case (default). See clean_names details.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/signif_pad.html","id":null,"dir":"Reference","previous_headings":"","what":"Round numbers with 0-padding. — signif_pad","title":"Round numbers with 0-padding. — signif_pad","text":"Utility functions round numbers, similar base functions  signif round, resulting character representations   keep zeros right edge significant.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/signif_pad.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Round numbers with 0-padding. — signif_pad","text":"","code":"signif_pad(   x,   digits = 3,   round.integers = TRUE,   round5up = TRUE,   format = \"fg\",   ... )  round_pad(x, digits = 2, round5up = TRUE, ...)"},{"path":"https://cam-ctu.github.io/cctu/reference/signif_pad.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Round numbers with 0-padding. — signif_pad","text":"x numeric vector. digits integer specifying number significant digits keep (signif_pad) number digits decimal point (round_pad). round.integers rounding limited digits right decimal point? round5up numbers 5 last digit always rounded ? standard R approach \"go even digit\" (IEC 60559 standard, see round), softwares (e.g. SAS, Excel) always round . format See formatC. Default \"fg\", change \"g\" scientific preferred. ... options, passed formatC (used internally). options work, might useful (e.g. big.mark, decimal.mark).","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/signif_pad.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Round numbers with 0-padding. — signif_pad","text":"character vector containing rounded numbers.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/signif_pad.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Round numbers with 0-padding. — signif_pad","text":"direct copy `table1` package","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/signif_pad.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Round numbers with 0-padding. — signif_pad","text":"","code":"x <- c(0.9001, 12345, 1.2, 1., 0.1, 0.00001, 1e5) signif_pad(x, digits = 3) #> [1] \"0.900\"     \"12300\"     \"1.20\"      \"1.00\"      \"0.100\"     \"0.0000100\" #> [7] \"100000\"    signif_pad(x, digits = 3, round.integers = TRUE) #> [1] \"0.900\"     \"12300\"     \"1.20\"      \"1.00\"      \"0.100\"     \"0.0000100\" #> [7] \"100000\"    round_pad(x, digits = 2) #> [1] \"0.90\"      \"12345.00\"  \"1.20\"      \"1.00\"      \"0.10\"      \"0.00\"      #> [7] \"100000.00\"  # Compare: as.character(signif(x, digits = 3)) #> [1] \"0.9\"   \"12300\" \"1.2\"   \"1\"     \"0.1\"   \"1e-05\" \"1e+05\" format(x, digits = 3, nsmall = 3) #> [1] \"9.00e-01\" \"1.23e+04\" \"1.20e+00\" \"1.00e+00\" \"1.00e-01\" \"1.00e-05\" \"1.00e+05\" prettyNum(x, digits = 3, drop0trailing = TRUE) #> [1] \"0.9\"   \"12345\" \"1.2\"   \"1\"     \"0.1\"   \"1e-05\" \"1e+05\" prettyNum(x, digits = 3, drop0trailing = FALSE) #> [1] \"0.9\"   \"12345\" \"1.2\"   \"1\"     \"0.1\"   \"1e-05\" \"1e+05\"  # This is very close. formatC(x, format = \"fg\", flag = \"#\", digits = 3) #> [1] \"0.900\"     \"12345.\"    \"1.20\"      \"1.00\"      \"0.100\"     \"0.0000100\" #> [7] \"100000.\"   formatC(signif(x, 3), format = \"fg\", flag = \"#\", digits = 3) #> [1] \"0.900\"     \"12300.\"    \"1.20\"      \"1.00\"      \"0.100\"     \"0.0000100\" #> [7] \"100000.\"    # Could always remove the trailing \".\" sub(\"[.]$\", \"\", formatC(x, format = \"fg\", flag = \"#\", digits = 3)) #> [1] \"0.900\"     \"12345\"     \"1.20\"      \"1.00\"      \"0.100\"     \"0.0000100\" #> [7] \"100000\""},{"path":"https://cam-ctu.github.io/cctu/reference/source.html","id":null,"dir":"Reference","previous_headings":"","what":"A modified version of the source() function to capture in a data.frame what file was called and from which file — source","title":"A modified version of the source() function to capture in a data.frame what file was called and from which file — source","text":"modified version source() function capture data.frame file called file","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/source.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A modified version of the source() function to capture in a data.frame what file was called and from which file — source","text":"","code":"source(   file,   local = getOption(\"cctu_source_local\", default = FALSE),   backup = NULL,   ... )"},{"path":"https://cam-ctu.github.io/cctu/reference/source.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"A modified version of the source() function to capture in a data.frame what file was called and from which file — source","text":"file connection character string giving     pathname file URL read .  stdin()     connection reads console interactive. local TRUE, FALSE environment, determining     parsed expressions evaluated.  FALSE (    default) corresponds user's workspace (global     environment) TRUE environment     source called. backup character string giving file path save image R environment sourcing code. Default NULL, save image. ... parameters passed source.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/source.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"A modified version of the source() function to capture in a data.frame what file was called and from which file — source","text":"return value","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/source.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"A modified version of the source() function to capture in a data.frame what file was called and from which file — source","text":"evaluates code file argument, also augments creates  dataframe two variables (parent, child). intention record  architecture sequenece code files run using nested source()  statements. override function use source <- base::source.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/stat_tab.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a descriptive summary statistics table. — stat_tab","title":"Generate a descriptive summary statistics table. — stat_tab","text":"important use variable label value label produce proper descriptive table. Variables value labels converted ordered factor order value labels (to_factor). variable labels used output. first row blank row names variable label. Variable name used variable variable label.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/stat_tab.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a descriptive summary statistics table. — stat_tab","text":"","code":"stat_tab(   vars,   group = NULL,   data,   total = TRUE,   select = NULL,   add_missing = TRUE,   digits = 2,   digits_pct = 1,   rounding_fn = signif_pad,   render_num = \"Median [Min, Max]\",   logical_na_impute = FALSE )"},{"path":"https://cam-ctu.github.io/cctu/reference/stat_tab.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a descriptive summary statistics table. — stat_tab","text":"group Name grouping variable. data data.frame variables vars taken. total \"Total\" column created (default). Specify FALSE omit column. select named vector many components row-variables. Every element `select` used select individuals analyzed  every row-variable. Name vector corresponds row variable,  element selection. add_missing missing number missing percentage   reported summary table, default `TRUE`. also produce data missingness report set TRUE. See report_missing details. digits integer specifying number significant digits keep, default 3. digits_pct integer specifying number digits decimal place percentages, default 0. rounding_fn function use rounding. Defaults signif_pad. round digits instead significant values, set round_pad. render_num character vector indicating summary reported,  default \"Median [Min, Max]\". can change \"Median [Q1, Q3]\" median IQR reported instead \"Median [Min, Max]\". Use options(cctu_render_num = \"Median [IQR]\") set global options. See details render_numeric num_stat. logical_na_impute Impute missing values FALSE (default), NA keep , TRUE. nominator logical vector number TRUE. FALSE TRUE, denominator  values regardless missingness, non-missing number used denominator NA. Set FALSE want summarise multiple choice variables NA Yes/type logical variables want summary. can used named list x stack multiple  choice one category.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/stat_tab.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate a descriptive summary statistics table. — stat_tab","text":"object class \"cttab\".","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/sumby.html","id":null,"dir":"Reference","previous_headings":"","what":"Produces summary statistics on a variable broken down by arm, display a graphical equivalent. — sumby","title":"Produces summary statistics on a variable broken down by arm, display a graphical equivalent. — sumby","text":"Produces summary statistics variable broken arm, display graphical equivalent.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/sumby.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Produces summary statistics on a variable broken down by arm, display a graphical equivalent. — sumby","text":"","code":"sumby(   variable,   arm,   label = NULL,   data = parent.frame(),   total = TRUE,   fig = TRUE,   directory = file.path(getOption(\"cctu_output\", default = \"Output\"), \"Figures\"),   verbose = options()$verbose,   text_clean = propercase,   pct_digits = 0,   delete = NULL )"},{"path":"https://cam-ctu.github.io/cctu/reference/sumby.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Produces summary statistics on a variable broken down by arm, display a graphical equivalent. — sumby","text":"variable variable interest summarised. Works several classes: numeric, integer, factor, character. arm variable break summary , typically arm RCT. constant variable 1-armed study label text string label variable , used add units full words spaces rather acronyms. Defaults NULL. data optional data frame, envirnoment, find variable arm values. Defaults parent.frame() total logical value include extra overall columns. Defaults true fig logical value whether print (interactive) save copy figure. Defaults true directory path directory figures saved \"sumby_XX_Y.png\". XX taken current table numer (\"0\") set attach_pop, Y counting many time sumby run since XX last set. verbose logical print information changes global environment external files. Defaults options()$verbose. text_clean function transform character labels. Defaults propercase. set NULL want preserve original text. pct_digits number decimal places present percentages . Defaults 0. delete levels input variable removed output table, case frequency tables. Can useful binary variable just want rate \"yes\" example.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/sumby.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Produces summary statistics on a variable broken down by arm, display a graphical equivalent. — sumby","text":"data.frame containing summary statistics character format, ready use write_table(). Plus attribute \"fig\" contains  ggplot object","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/sumfig.html","id":null,"dir":"Reference","previous_headings":"","what":"Produce ggplot to represent summary statistics graphically, either boxplot or barchart — sumfig","title":"Produce ggplot to represent summary statistics graphically, either boxplot or barchart — sumfig","text":"Produce ggplot represent summary statistics graphically, either boxplot barchart","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/sumfig.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Produce ggplot to represent summary statistics graphically, either boxplot or barchart — sumfig","text":"","code":"sumfig(variable, arm, label = NULL, data = parent.frame(), ...)"},{"path":"https://cam-ctu.github.io/cctu/reference/sumfig.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Produce ggplot to represent summary statistics graphically, either boxplot or barchart — sumfig","text":"variable variable interest summarised. Works several classes: numeric, integer, factor, character. arm variable break summary , typically arm RCT. constant variable 1-armed study label text string label variable , used add units full words spaces rather acronyms. Defaults NULL. data optional data frame, envirnoment, find variable arm values. Defaults parent.frame() ... list values input aes() function","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/sumfig.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Produce ggplot to represent summary statistics graphically, either boxplot or barchart — sumfig","text":"ggplot object, either boxplot barchart","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/tidy_dlu.html","id":null,"dir":"Reference","previous_headings":"","what":"Tidy DLU form — tidy_dlu","title":"Tidy DLU form — tidy_dlu","text":"Separate visit, form question different columns. Variable names, values, dlu data converted lower  cases.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/tidy_dlu.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tidy DLU form — tidy_dlu","text":"","code":"tidy_dlu(x, clean_names = TRUE)"},{"path":"https://cam-ctu.github.io/cctu/reference/tidy_dlu.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Tidy DLU form — tidy_dlu","text":"x DLU data clean_names Conver variable name lower case (default). See clean_names details.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/tidy_dlu.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Tidy DLU form — tidy_dlu","text":"data.frame `visit/form/question` column separated `visit`, `form` `question` column.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/tidy_dlu.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Tidy DLU form — tidy_dlu","text":"DLU file contains four columns: shortcode: Variable name downloaded data. visit/form/question: Contains visit, form question. separated slash. function separate column `visit`, `form` `question` column output dataset. `question` column unique variable name particular CRF form. description: description variable, namely variable label. used apply_macro_dict create variable  label. type: type variable, IntegerData, Text, Date, Real Category four categories. used apply_macro_dict  convert variables corresponding type.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/to_factor.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert vector but keep value/value labels. — to_factor","title":"Convert vector but keep value/value labels. — to_factor","text":"Convert vector keep value/value labels. to_factor convert vector factor corresponding value labels unique values vector. Note `NA` blank values excluded  converting. return factor original values  value label. to_character Convert vector character vector keep variable labels. generic function `.character` lost label attributes. want convert value label value , use lab2val  instead. to_numeric Convert vector numeric vector keep variable labels. generic function `.numeric` lost label attributes. to_logical Convert vector logical vector keep variable labels. generic function `.logical` lost label attributes.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/to_factor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert vector but keep value/value labels. — to_factor","text":"","code":"to_factor(x, ordered = TRUE, drop_levels = FALSE)  to_character(x)  to_numeric(x)  to_logical(x)"},{"path":"https://cam-ctu.github.io/cctu/reference/to_factor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert vector but keep value/value labels. — to_factor","text":"x vector ordered logical flag determine levels regarded ordered. drop_levels `TRUE`, drop unused levels converted factor, default `FALSE`. argument previously \"drop.levels\".","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/to_factor.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert vector but keep value/value labels. — to_factor","text":"Factor/character form x value labels instead values. numeric logical vectors corresponding type.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/to_factor.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert vector but keep value/value labels. — to_factor","text":"","code":"data(mtcars) #> name=mtcars:\t NOT found in names() of Rdata.rds, i.e., #> \tcancer,cgd,diabetic,flchain,heart,logan,nafld,nwtco,pbc,reliability,retinopathy,rhDNase,solder,survexp,tobin,transplant,udca #> name=mtcars:\t NOT found in names() of Rdata.rds, i.e., #> \tdiamonds,economics,economics_long,faithfuld,luv_colours,midwest,mpg,msleep,presidential,seals,txhousing #> name=mtcars:\t NOT found in names() of Rdata.rds, i.e., #> \tmeta_table_example #> name=mtcars:\t found in Rdata.rds mtcars <- within(mtcars, {   var_lab(am) <- \"Transmission\"   val_lab(am) <- c(\" automatic\" = 0, \" manual\" = 1) })  mtcars$am <- to_factor(mtcars$am) mtcars$gear <- to_character(mtcars$gear)"},{"path":"https://cam-ctu.github.io/cctu/reference/unlab.html","id":null,"dir":"Reference","previous_headings":"","what":"Drop variable label and value labels — unlab","title":"Drop variable label and value labels — unlab","text":"unlab returns variable x without variable labels value labels","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/unlab.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Drop variable label and value labels — unlab","text":"","code":"unlab(x)"},{"path":"https://cam-ctu.github.io/cctu/reference/unlab.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Drop variable label and value labels — unlab","text":"x Variable(s). Vector/data.frame/list.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/unlab.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Drop variable label and value labels — unlab","text":"unlab returns original variable x without variable label, value labels.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/unlab.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Drop variable label and value labels — unlab","text":"modified version `expss` package.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/unlab.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Drop variable label and value labels — unlab","text":"","code":"raw_var <- rep(1:2, 5) var_with_lab <- raw_var var_lab(var_with_lab) <- \"Income\" val_lab(var_with_lab) <- c(\"Low\" = 1, \"High\" = 2) identical(raw_var, unlab(var_with_lab)) # should be TRUE #> [1] TRUE"},{"path":"https://cam-ctu.github.io/cctu/reference/val_lab.html","id":null,"dir":"Reference","previous_headings":"","what":"Set or get value labels — val_lab","title":"Set or get value labels — val_lab","text":"functions set/get/drop value labels. Duplicated values allowed. argument x data.frame list labels applied elements data.frame/list. drop value labels, use val_lab(var) <- NULL unval(var). variable labels see  var_lab. val_lab returns value labels NULL labels exist. val_lab<- set value labels. unval drops value labels. has_labels check value labels exists.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/val_lab.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set or get value labels — val_lab","text":"","code":"val_lab(x)  val_lab(x) <- value  has_labels(x)  unval(x)"},{"path":"https://cam-ctu.github.io/cctu/reference/val_lab.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set or get value labels — val_lab","text":"x Variable(s). Vector/data.frame/list. value Named vector. Names vector labels appropriate values variable x. Names can duplicated, value.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/val_lab.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set or get value labels — val_lab","text":"val_lab return value labels (named vector). labels   exist return NULL . val_lab<- return variable (vector x)   contains value labels.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/val_lab.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Set or get value labels — val_lab","text":"Value labels stored attribute \"labels\"   (attr(x,\"labels\")).","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/val_lab.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Set or get value labels — val_lab","text":"modified version `expss` package.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/val_lab.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Set or get value labels — val_lab","text":"","code":"# toy example set.seed(123) # score - evaluation of tested product  score <- sample(-1:1, 20, replace = TRUE) var_lab(score) <- \"Evaluation of tested brand\" val_lab(score) <- c(   \"Dislike it\" = -1,   \"So-so\" = 0,   \"Like it\" = 1 )"},{"path":"https://cam-ctu.github.io/cctu/reference/var_lab.html","id":null,"dir":"Reference","previous_headings":"","what":"Set or get variable label — var_lab","title":"Set or get variable label — var_lab","text":"functions set/get/drop variable labels. value labels see val_lab. var_lab returns variable label NULL label exist. var_lab<- set variable label. drop_lab drops variable label. has_label check variable label exists.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/var_lab.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set or get variable label — var_lab","text":"","code":"var_lab(x)  # S3 method for class 'data.frame' var_lab(x)  var_lab(x) <- value  has_label(x)  drop_lab(x)"},{"path":"https://cam-ctu.github.io/cctu/reference/var_lab.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set or get variable label — var_lab","text":"x Variable. cases numeric vector. value character scalar - label variable x.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/var_lab.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set or get variable label — var_lab","text":"var_lab return variable label. label exist return NULL . var_lab<- return variable (vector x) attribute \"label\" equals submitted value.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/var_lab.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Set or get variable label — var_lab","text":"Variable label stored attribute \"label\" (attr(x,\"label\")). drop variable label use var_lab(var) <- NULL drop_lab(var).","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/var_lab.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Set or get variable label — var_lab","text":"modified version `expss` package.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/var_lab.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Set or get variable label — var_lab","text":"","code":"data(mtcars) #> name=mtcars:\t NOT found in names() of Rdata.rds, i.e., #> \tcancer,cgd,diabetic,flchain,heart,logan,nafld,nwtco,pbc,reliability,retinopathy,rhDNase,solder,survexp,tobin,transplant,udca #> name=mtcars:\t NOT found in names() of Rdata.rds, i.e., #> \tdiamonds,economics,economics_long,faithfuld,luv_colours,midwest,mpg,msleep,presidential,seals,txhousing #> name=mtcars:\t NOT found in names() of Rdata.rds, i.e., #> \tmeta_table_example #> name=mtcars:\t found in Rdata.rds mtcars <- within(mtcars, {   var_lab(mpg) <- \"Miles/(US) gallon\"   var_lab(cyl) <- \"Number of cylinders\"   var_lab(disp) <- \"Displacement (cu.in.)\"   var_lab(hp) <- \"Gross horsepower\"   var_lab(drat) <- \"Rear axle ratio\"   var_lab(wt) <- \"Weight (lb/1000)\"   var_lab(qsec) <- \"1/4 mile time\"   var_lab(vs) <- \"V/S\"   val_lab(vs) <- c(\"V-shaped\" = 0, \"straight\" = 1)   var_lab(am) <- \"Transmission\"   val_lab(am) <- c(automatic = 0, manual = 1)   var_lab(gear) <- \"Number of forward gears\"   var_lab(carb) <- \"Number of carburetors\" })  table(mtcars$am) #>  #>  0  1  #> 19 13"},{"path":"https://cam-ctu.github.io/cctu/reference/write_docx.html","id":null,"dir":"Reference","previous_headings":"","what":"Produces the final Docx file — write_docx","title":"Produces the final Docx file — write_docx","text":"Produces final Docx file","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/write_docx.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Produces the final Docx file — write_docx","text":"","code":"write_docx(   report_title,   author,   meta_table = get_meta_table(),   filename = file.path(getOption(\"cctu_output\", default = \"Output\"), \"Reports\",     \"Report.docx\"),   table_path = file.path(getOption(\"cctu_output\", default = \"Output\"), \"Core\"),   figure_format = \"png\",   figure_path = file.path(getOption(\"cctu_output\", default = \"Output\"), \"Figures\"),   popn_labels = NULL,   verbose = options()$verbose,   keep_xml = FALSE )"},{"path":"https://cam-ctu.github.io/cctu/reference/write_docx.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Produces the final Docx file — write_docx","text":"report_title text string used label report title page author text string naming author meta_table data frame  contains meta information tables (title, population, number). Defaults get_meta_table() filename text string giving filename/path output word document table_path text string giving filepath tables folder. used directly open table files copy content. figure_format supports png format. figure_path text string giving filepath figures folder. used create reference within  word document. Hence needs  relative (output report) path \"../Figures\". Likely lead   empty figures report changed. popn_labels alternative text string giving labels used population - might want include population size... must match  correctly unique(meta_table$population), excluding rows blank,  , population given verbose logical print information changes global environment external files. Defaults options()$verbose. keep_xml boolean compiled XML kept, used debugging purpose.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/write_docx.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Produces the final Docx file — write_docx","text":"function run side-effects: creates xml document glues together outputs meta data per meta-table argument; transformation fo per xslt file, default can  opened word document.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/write_docx.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Produces the final Docx file — write_docx","text":"suggest file.path used create non default file paths, cope OS vaguaries.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/write_ggplot.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to save ggplot figures. — write_ggplot","title":"Function to save ggplot figures. — write_ggplot","text":"wrapup function write_plot print ggplot  object.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/write_ggplot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to save ggplot figures. — write_ggplot","text":"","code":"write_ggplot(   plot = last_plot(),   number = cctu_env$number,   width = 29.7 * 0.6,   height = 21 * 0.6,   dpi = 300,   units = \"cm\",   clean_up = TRUE,   directory = file.path(getOption(\"cctu_output\", default = \"Output\"), \"Figures\"),   format = getOption(\"cctu_fig_format\", default = c(\"png\", \"eps\")),   graphics_args = NULL,   verbose = options()$verbose,   footnote = NULL )"},{"path":"https://cam-ctu.github.io/cctu/reference/write_ggplot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to save ggplot figures. — write_ggplot","text":"plot plot object save. defaults last_plot number number used suffix output filename, link TableofTables. Default use value cctu_env package  environment set within attach_pop. width width save height height save dpi resolution setting units either \"cm\" (default) \"inches\" clean_up logical invoke clean_up function end. Defaults TRUE directory save figures within path current working directory. Output directory can -riden options(\"cctu_output\"). format either \"png\", \"eps\", \"ps\", \"pdf\", \"svg\", \"jpg\" \"jpeg\" determine  file type use. can request multiple file types providing vector.  \"png\" format always produced saved  directory, typically Output/Figures. formats  saved sub-folder format name. See details  information. can set default figure format setting  options(cctu_fig_format = c(\"png\", \"eps\")) (default). graphics_args list named arguments supply graphics function. png \"png\", postscript \"ps\" \"eps\", jpeg \"jpg\" \"jpeg\", pdf \"pdf\"). ragg package installed, use agg_png \"png\" agg_jpeg \"jpg\" \"jpeg\" better quality. svglite used \"svg\" file. verbose logical print information changes global environment external files. Defaults options()$verbose. footnote character vector, can used add footnotes.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/write_ggplot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to save ggplot figures. — write_ggplot","text":"writes copy plot file fig_number. edits TableofTables  object calling program return object.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/write_manual.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to write to meta-table and clean up without creating a table,text, or figure. For manual use — write_manual","title":"Function to write to meta-table and clean up without creating a table,text, or figure. For manual use — write_manual","text":"Function write meta-table clean without creating table,text, figure. manual use","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/write_manual.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to write to meta-table and clean up without creating a table,text, or figure. For manual use — write_manual","text":"","code":"write_manual(   number = cctu_env$number,   clean_up = TRUE,   verbose = options()$verbose )"},{"path":"https://cam-ctu.github.io/cctu/reference/write_manual.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to write to meta-table and clean up without creating a table,text, or figure. For manual use — write_manual","text":"number number used suffix output filename, link TableofTables. Default use value cctu_env package  environment set within attach_pop. clean_up logical invoke clean_up function end. Defaults TRUE verbose logical print information changes global environment external files. Defaults options()$verbose.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/write_manual.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to write to meta-table and clean up without creating a table,text, or figure. For manual use — write_manual","text":"Edits meta_table object calling program optionally cleans . return object.  Meant use table figure report created manually outside write_ggplot  write_table","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/write_plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to save plot figures — write_plot","title":"Function to save plot figures — write_plot","text":"One may always use ggplot2 draw plot, base plot function example, function particularly useful situation.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/write_plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to save plot figures — write_plot","text":"","code":"write_plot(   ...,   plot_fn = plot,   number = cctu_env$number,   width = 29.7 * 0.6,   height = 21 * 0.6,   dpi = 300,   units = \"cm\",   clean_up = TRUE,   directory = file.path(getOption(\"cctu_output\", default = \"Output\"), \"Figures\"),   format = getOption(\"cctu_fig_format\", default = c(\"png\", \"eps\")),   graphics_args = NULL,   verbose = options()$verbose,   footnote = NULL,   plot_args = NULL )"},{"path":"https://cam-ctu.github.io/cctu/reference/write_plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to save plot figures — write_plot","text":"... Arguments passed ploting function plot_fn . plot_fn function draw plot. can simple print plot (default) custom plot drawing function depending plot drawn. See details examples . number number used suffix output filename, link TableofTables. Default use value cctu_env package  environment set within attach_pop. width width save height height save dpi resolution setting units either \"cm\" (default) \"inches\" clean_up logical invoke clean_up function end. Defaults TRUE directory save figures within path current working directory. Output directory can -riden options(\"cctu_output\"). format either \"png\", \"eps\", \"ps\", \"pdf\", \"svg\", \"jpg\" \"jpeg\" determine  file type use. can request multiple file types providing vector.  \"png\" format always produced saved  directory, typically Output/Figures. formats  saved sub-folder format name. See details  information. can set default figure format setting  options(cctu_fig_format = c(\"png\", \"eps\")) (default). graphics_args list named arguments supply graphics function. png \"png\", postscript \"ps\" \"eps\", jpeg \"jpg\" \"jpeg\", pdf \"pdf\"). ragg package installed, use agg_png \"png\" agg_jpeg \"jpg\" \"jpeg\" better quality. svglite used \"svg\" file. verbose logical print information changes global environment external files. Defaults options()$verbose. footnote character vector, can used add footnotes. plot_args Deprecated, kept backcompatibility. named list arguments plot_fn. plot plot object save. defaults last_plot","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/write_plot.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to save plot figures — write_plot","text":"writes copy plot file fig_number. edits TableofTables  object calling program return object.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/write_plot.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Function to save plot figures — write_plot","text":"## Saving plot plot_fn can user defined function draw plot. Let us assume object p plot object. can see plot simply typing p console, print. can see plot simply typing plot(p) console, plot. parameters passed names. Checkout examples . ## Figure formats can request multiple figure formats saving plot. can save \"png\" (default), \"eps\", \"ps\", \"pdf\", \"svg\", \"jpg\" /\"jpeg\" formats. \"png\" format always produced produce final Word report. \"eps\",  \"ps\", \"pdf\" \"svg\" vector figures can  post edit figures tools like Inkscape.  \"svg\" recommended want modify plots. can easily export \"svg\" formats, including \"eps\"  \"ps\", \"pdf\". svglite used generate \"svg\" file.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/write_plot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Function to save plot figures — write_plot","text":"","code":"if (FALSE) { # \\dontrun{ ##################################### # Below is a simple example ========# ##################################### # write_plot(plot_fn = plot, plot_args = list(x = iris[, 1], y = iris[, 2])) # This is equivalent drawing the following plot and save it plot(x = iris[, 1], y = iris[, 2])  # Below is user defined function plotting # One can use this method to draw a complicated plot new_plot <- function(x, y, h, v) {   par(pty = \"s\", cex = 0.7) # adjust plot style   plot(x, y)   abline(h = h, v = v, lty = 2) # add some lines } write_plot(   x = iris[, 1], y = iris[, 2], h = 2.5, v = 6.0,   plot_fn = new_plot )   #################################################### # To draw a KM-plot from survminer package ========# ####################################################  library(\"survival\") library(\"survminer\") fit <- survfit(Surv(time, status) ~ sex, data = lung) # Drawing survival curves p <- ggsurvplot(fit, data = lung) write_plot(p, plot_fn = survminer:::print.ggsurvplot) # The code above works because the p is a ggsurvplot object (check it with class(p)) # There's a printing function print.ggsurvplot to handle the printing of the KM-plot. # But this function is not exported by survminer, so we need to use three colons.  ##################################### # Draw a consort diagram ===========# #####################################  library(grid) # Might want to change some settings txt0 <- c(\"Study 1 (n=160)\", \"Study 2 (n=140)\") txt1 <- \"Population (n=300)\" txt1_side <- \"Excluded (n=15):\\n\\u2022 MRI not collected (n=15)\"  # supports pipeline operator g <- add_box(txt = txt0) |>   add_box(txt = txt1) |>   add_side_box(txt = txt1_side) |>   add_box(txt = \"Randomized (n=200)\") # Since you can draw the plot g with plot(g), the ploting function is plot # The plotting function is \\code{plot.consort}, so simple plot or plot.consort works write_plot(g, plot_fn = plot) # Or just write_plot(g) } # }"},{"path":"https://cam-ctu.github.io/cctu/reference/write_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to write a table into xml format in the correct directory, and edit TableofTables — write_table","title":"Function to write a table into xml format in the correct directory, and edit TableofTables — write_table","text":"Function write table xml format correct directory, edit TableofTables","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/write_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to write a table into xml format in the correct directory, and edit TableofTables — write_table","text":"","code":"write_table(   x,   number = cctu_env$number,   heading = NULL,   na_to_empty = getOption(\"cctu_na_to_empty\", default = FALSE),   clean_up = TRUE,   directory = file.path(getOption(\"cctu_output\", default = \"Output\"), \"Core\"),   verbose = options()$verbose,   footnote = NULL )"},{"path":"https://cam-ctu.github.io/cctu/reference/write_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to write a table into xml format in the correct directory, and edit TableofTables — write_table","text":"x data.frame table saved xml format number number used suffix output filename, link TableofTables. Default use value cctu_env package  environment set within attach_pop. heading character vector column titles. Defaults colnames x na_to_empty logical, true NA values written empty strings. Defaults false. clean_up logical invoke clean_up function end. Defaults TRUE directory save figures within path current working directory. Output directory can -riden options(\"cctu_output\"). verbose logical print information changes global environment external files. Defaults options()$verbose. footnote character vector, can used add footnotes.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/write_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to write a table into xml format in the correct directory, and edit TableofTables — write_table","text":"writes xml version input data file table_number.xml.  Edits TableofTables object calling programe. return object.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/write_table.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Function to write a table into xml format in the correct directory, and edit TableofTables — write_table","text":"Variable names values replace variable labels value labels respectively available writing data. Use options(cctu_na_to_empty = TRUE) write NA values written empty strings globally.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/reference/write_text.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to write a text into xml format in the correct directory, and edit TableofTables — write_text","title":"Function to write a text into xml format in the correct directory, and edit TableofTables — write_text","text":"Function write text xml format correct directory, edit TableofTables","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/write_text.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to write a text into xml format in the correct directory, and edit TableofTables — write_text","text":"","code":"write_text(   x,   number = cctu_env$number,   clean_up = TRUE,   directory = file.path(getOption(\"cctu_output\", default = \"Output\"), \"Core\"),   verbose = options()$verbose )"},{"path":"https://cam-ctu.github.io/cctu/reference/write_text.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to write a text into xml format in the correct directory, and edit TableofTables — write_text","text":"x character string saved xml format number number used suffix output filename, link TableofTables. Default use value cctu_env package  environment set within attach_pop. clean_up logical invoke clean_up function end. Defaults TRUE directory save figures within path current working directory. Output directory can -riden options(\"cctu_output\"). verbose logical print information changes global environment external files. Defaults options()$verbose.","code":""},{"path":"https://cam-ctu.github.io/cctu/reference/write_text.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to write a text into xml format in the correct directory, and edit TableofTables — write_text","text":"writes xml version input data file text_number.xml . Edits TableofTables object calling programe. return object.","code":""},{"path":[]},{"path":"https://cam-ctu.github.io/cctu/news/index.html","id":"cctu-0811","dir":"Changelog","previous_headings":"","what":"cctu 0.8.11","title":"cctu 0.8.11","text":"Trying fix links Package .","code":""},{"path":"https://cam-ctu.github.io/cctu/news/index.html","id":"cctu-0810","dir":"Changelog","previous_headings":"","what":"cctu 0.8.10","title":"cctu 0.8.10","text":"Worked make vignettes’ links output files actually work. Fixed analysis-template rmarkdown_report. See \\vignette\\readme.txt","code":""},{"path":"https://cam-ctu.github.io/cctu/news/index.html","id":"cctu-089","dir":"Changelog","previous_headings":"","what":"cctu 0.8.9","title":"cctu 0.8.9","text":"Bug fix cttab group variable name data set want use group argument. Passing lint tests. Argument to_factor() “drop.levels” now “drop_levels”. internal changes indentation variable naming .","code":""},{"path":"https://cam-ctu.github.io/cctu/news/index.html","id":"cctu-088","dir":"Changelog","previous_headings":"","what":"cctu 0.8.8","title":"cctu 0.8.8","text":"write_plot() write_ggplot() (retired function), now accept multiple values format argument. default create PNG format use docx report, also eps, saved subfolder, format accepted journals. minor bugfixes improved unit testing locally CI GitHub.","code":""},{"path":"https://cam-ctu.github.io/cctu/news/index.html","id":"cctu-087","dir":"Changelog","previous_headings":"","what":"cctu 0.8.7","title":"cctu 0.8.7","text":"Tools cctu_initialise library_description record load packages using DESCRIPTION file. Better code_tree plotting. Fixes cttab variable totally missing. Updates vignettes give pointers advice using Quarto.","code":""},{"path":"https://cam-ctu.github.io/cctu/news/index.html","id":"cctu-086","dir":"Changelog","previous_headings":"","what":"cctu 0.8.6","title":"cctu 0.8.6","text":"Applied testing edits lintr styler meet tidyverse style r code. Fixed issue source() now work rstudio button. Partially set pkdown site version docs- currently able include vignettes.","code":""},{"path":"https://cam-ctu.github.io/cctu/news/index.html","id":"cctu-084","dir":"Changelog","previous_headings":"","what":"cctu 0.8.4","title":"cctu 0.8.4","text":"Added km_ggplot() function produce publication-quality Kaplan-Meier figures error bands table underneath. Added options(“cctu_p_digits”) default 4 regression_table() km_ggplot()","code":""},{"path":"https://cam-ctu.github.io/cctu/news/index.html","id":"cctu-083","dir":"Changelog","previous_headings":"","what":"cctu 0.8.3","title":"cctu 0.8.3","text":"Fixed bug write_docx() multi-line headers now completely visible. Testing added docx outputs. Added options(cctu_output) optinos(cctu_source_local) change default arguments write_xx() source() Updated Vignette","code":""},{"path":"https://cam-ctu.github.io/cctu/news/index.html","id":"cctu-082","dir":"Changelog","previous_headings":"","what":"cctu 0.8.2","title":"cctu 0.8.2","text":"Added write_docx() creates directly fully compliant OfficeOpen docx file, subsequent steps needed, open online office/word tools.","code":""},{"path":"https://cam-ctu.github.io/cctu/news/index.html","id":"cctu-081","dir":"Changelog","previous_headings":"","what":"cctu 0.8.1","title":"cctu 0.8.1","text":"Fixing GitHub continuous integration. Minor fixes rbind_space, data_table_summary","code":""},{"path":"https://cam-ctu.github.io/cctu/news/index.html","id":"cctu-080","dir":"Changelog","previous_headings":"","what":"cctu 0.8.0","title":"cctu 0.8.0","text":"Added regression_table() generic print nice tidy table present regression models. Minor improvements updates functions including cttab write_plot.","code":""},{"path":"https://cam-ctu.github.io/cctu/news/index.html","id":"cctu-076","dir":"Changelog","previous_headings":"","what":"cctu 0.7.6","title":"cctu 0.7.6","text":"apply_macro_dict() function faster now. default, evaluating whether category variable’s type numeric converting skipped. Table figure numbers locked, saving Word PDF change numbers. Figures embedded document. need perform “save picture document”. Dynamically add footnotes tables figures write_table() write_ggplot(). ’s new function write_plot() save figures ggplot family, KM-plot survminer example. Bugfix: headings used provided write_table(). p_format round pvalues convert <0.001 character variable.","code":""}]
